CREATE PROCEDURE SP3S_GET_CONFIG_ALL
(
	@nQueryID INT,
	@cDeptID VARCHAR(5)=''
)
AS
BEGIN
	IF(@nQueryID=1)
	BEGIN
		DECLARE @DTALL TABLE (DisplayMember varchar(200), ValueMember varchar(200),Config_Option varchar(200))
		DECLARE @cP1 VARCHAR(50),@cP2 VARCHAR(50),@cP3 VARCHAR(50),@cP4 VARCHAR(50),@cP5 VARCHAR(50),@cP6 VARCHAR(50)

		DECLARE @dtMoreConfig TABLE (CONFIG_OPTION VARCHAR(100))
		INSERT @dtMoreConfig(CONFIG_OPTION)
		VALUES( 'DEFINE_FOCUS_ON_ARTICLEMASTER'),( 'RANDOM_ARTICLE_NO'),('ENABLE_AUTO_ARTICLE'),( 'RANDOM_ARTICLE_PREFIX')
		,( 'RANDOM_NO_AlPHA'),( 'RANDOM_NO_NUMERIC'),('ESTIMATE_SHORTCUT_KEY'),( 'ESTIMATE_SHORTCUT_KEY'),( 'DO_NOT_ENFORCE_LAST_RUN_DT')
		,( 'LAST_RUN_DATE'),('LAST_RUN_DATE_WENC'),( 'PRODUCT_CODE_GENERATION_RANDOM'),( 'ADD_PREFIX'),( 'PREFIX'),( 'YEAR_CODE_IN_PC')
		,('MONTH_CODE_IN_PC'),('LOCATION_ID_IN_PC'),('FLOOR_ID_IN_PC'),('OVERRIDE_PREFIX_IN_PUR'),( 'NO_OF_ALPHA_NUMERIC_CHAR'),('SHOW_PUR_HISTORY')
		,( 'PUR_HISTORY_FILTER_SUPPLIER'),( 'PUR_HISTORY_FILTER_PARA1'),('PUR_HISTORY_FILTER_PARA2') ,( 'PUR_HISTORY_FILTER_PARA3') ,( 'PUR_HISTORY_FILTER_PARA4') 
		,( 'PUR_HISTORY_FILTER_PARA5') ,('PUR_HISTORY_FILTER_PARA6') ,( 'DO_NOT_CREATE_SECTION_MASTERS_IN_FILE_IMPORT'),( 'DO_NOT_CREATE_SUB_SECTION_MASTERS_IN_FILE_IMPORT')
		,( 'DO_NOT_CREATE_ARTICLE_MASTERS_IN_FILE_IMPORT'),( 'DO_NOT_CREATE_PARA1_MASTERS_IN_FILE_IMPORT'),( 'DO_NOT_CREATE_PARA2_MASTERS_IN_FILE_IMPORT')
		,('DO_NOT_CREATE_PARA3_MASTERS_IN_FILE_IMPORT'),( 'DO_NOT_CREATE_PARA4_MASTERS_IN_FILE_IMPORT'),('DO_NOT_CREATE_PARA5_MASTERS_IN_FILE_IMPORT')
		,( 'DO_NOT_CREATE_PARA6_MASTERS_IN_FILE_IMPORT'),( 'DO_NOT_CREATE_AC_MASTERS_IN_FILE_IMPORT'),( 'DO_NOT_CREATE_UOM_MASTERS_IN_FILE_IMPORT'),( 'ENABLE_THIRD_PARTY_LOYALTY')
		,('LOYALTY_VENDOR'),( 'LOYALTY_URL_ADD'),( 'LOYALTY_USERID'),( 'LOYALTY_PWD'),( 'LOYALTY_POINTS_REDEEM_AS'),( 'ENABLE_ALERT_MSG'),( 'ALERT_ARTICLE_NO')
		,( 'ALERT_PARA1'),('ALERT_PARA2'),( 'ALERT_PARA3'), ('ALERT_PARA4'),( 'ALERT_PARA5'),('ALERT_PARA6'),( 'CONSIDER_PARA1'),('CONSIDER_PARA2')
		,('CONSIDER_PARA3'),( 'CONSIDER_PARA4'),( 'CONSIDER_PARA5'), ('CONSIDER_PARA6'),
		('ENABLE_REMOTE_IMAGE_SYNCH'),('REMOTE_IMAGE_PATH'),('IMAGE_DOWNLOAD_FOR_N_DAYS')


		INSERT INTO @DTALL(DisplayMember ,ValueMember ,Config_Option)
		EXEC SP3S_GET_CONFIG_DISPLAY_OPTION @nMode	=1
		
	

		SELECT DISTINCT CAST('' AS VARCHAR) AS CONFIG_SECTION, A.CONFIG_OPTION, A.VALUE, A.REMARKS, ISNULL(CTRL_NAME,'') AS CTRL_NAME, ISNULL(OPT_SR_NO ,0) AS OPT_SR_NO ,
		(CASE WHEN B1.CONFIG_OPTION IS NOT NULL THEN 'MORE' ELSE VALUE_TYPE END) AS VALUE_TYPE, (CASE WHEN VALUE_TYPE='Boolean' THEN ''--'Use Checkbox to [Tick '+CHAR(254)+']'
		WHEN VALUE_TYPE='String' THEN ISNULL(value,'')
		WHEN VALUE_TYPE='Option' THEN ISNULL(B.DisplayMember,ISNULL(value,''))
		ELSE (CASE WHEN b1.CONFIG_OPTION IS NOT NULL THEN 'See More Setting..' ELSE ISNULL(value,'') END) END) AS DISPLAY_VALUE,
		CAST((CASE WHEN VALUE_TYPE='Boolean' THEN (CASE WHEN value='1' THEN 1 ELSE 0 END)
							ELSE NULL END) AS BIT) AS CHK,GROUP_NAME,Description
							,CAST(ISNULL(SET_AT_HO,0) AS BIT) AS SET_AT_HO 
		FROM CONFIG A
		LEFT OUTER JOIN @DTALL B ON B.Config_Option=A.config_option  AND A.value=B.ValueMember
		LEFT OUTER JOIN @dtMoreConfig B1 ON B1.Config_Option=A.config_option 
		WHERE ISNULL(A.GROUP_NAME, '') <> '' 
		--AND ISNULL(A.REMARKS,'')<>'' AND ISNULL(VALUE_TYPE ,'') <>''
		--AND (ISNULL(A.DEPT_ID,'')='')-- OR ISNULL(A.DEPT_ID,'')=@cDeptID)
		AND B1.Config_Option IS NULL
		--ORDER BY A.GROUP_NAME,A.OPT_SR_NO
	END
	ELSE IF(@nQueryID=2)
	BEGIN
		;WITH CON
		AS
		(
			SELECT  0 AS SRNO,'ALL' GROUP_NAME,'ALL' AS XN_TYPE
			UNION 
			SELECT DISTINCT ROW_NUMBER() OVER (PARTITION BY GROUP_NAME ORDER BY GROUP_NAME) AS SRNO, GROUP_NAME,GROUP_NAME AS XN_TYPE
			FROM CONFIG  
			WHERE ISNULL(GROUP_NAME, '') NOT IN ('' ,'ALL')
			GROUP BY GROUP_NAME
		)
		SELECT  * FROM CON
		LEFT OUTER JOIN
		(
			SELECT 'PURCHASE' AS GROUP_NAME_MORE,'More Settings...' as MoreConfig
			UNION
			SELECT 'RETAIL SALE' AS GROUP_NAME_MORE,'More Settings...' as MoreConfig
			UNION
			SELECT 'MASTERS' AS GROUP_NAME_MORE,'More Settings...' as MoreConfig
			UNION
			SELECT 'MISC' AS GROUP_NAME_MORE,'More Settings...' as MoreConfig
			UNION
			SELECT 'WHOLESALE INVOICE' AS GROUP_NAME_MORE,'More Settings...' as MoreConfig
			UNION
			SELECT 'GST' AS GROUP_NAME_MORE,'More Settings...' as MoreConfig
			UNION
			SELECT 'IMAGEVIEWER' AS GROUP_NAME_MORE,'More Settings...' as MoreConfig
			UNION
			SELECT 'WHOLESALE BUYER ORDER' AS GROUP_NAME_MORE,'More Settings...' as MoreConfig
		)MORE ON MORE.GROUP_NAME_MORE=con.GROUP_NAME
		ORDER BY SRNO


	END
END