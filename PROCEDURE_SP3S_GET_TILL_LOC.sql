CREATE PROCEDURE SP3S_GET_TILL_LOC
--WITH ENCRYPTION
AS
BEGIN
	SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED

	SELECT A.TILL_ID,A.TILL_NAME,(CASE WHEN C.DEPT_ID IS NULL THEN 0 ELSE 1 END) AS CHK
		  ,B.DEPT_ID,B.DEPT_NAME,C.TILL_LIMIT,C.LAST_UPDATE	 
	FROM TILL_MST A
	CROSS JOIN LOCATION B 
	LEFT JOIN TILL_LOCS C ON C.DEPT_ID=B.DEPT_ID AND A.TILL_ID=C.TILL_ID
	WHERE A.INACTIVE=0 AND B.INACTIVE=0 AND ISNULL(B.TILL_ENABLED,0)=1
	ORDER BY A.TILL_ID
END
--END OF PROCEDURE - SP3S_GET_TILL_LOC
