CREATE PROC SP_PCASH_AC
(
 @NQUERYID  NUMERIC(3,0) 
)
--WITH ENCRYPTION

AS
BEGIN
DECLARE @cHEAD_CODE VARCHAR(MAX)
IF @NQUERYID=1            
GOTO LBL1 
ELSE IF @NQUERYID=2
GOTO LBL2
ELSE IF @NQUERYID=3
GOTO LBL3

LBL1: 

 SELECT  HEAD_CODE,HEAD_NAME 
 FROM HD01106 (NOLOCK) 
	

GOTO LAST  

LBL2: 

    SELECT A.HEAD_CODE,B.HEAD_NAME, '' AS ROW_ID 
	FROM PETTY_CASH_AC A (NOLOCK)
	JOIN HD01106 B (NOLOCK) ON A.HEAD_CODE = B.HEAD_CODE  
	--WHERE A.HEAD_CODE <> '0000000027'
	--UNION ALL
	--SELECT  HEAD_CODE,HEAD_NAME,'' AS ROW_ID  
	--FROM HD01106 (NOLOCK) 
	--WHERE HEAD_CODE = '0000000027'	
 

GOTO LAST    


LBL3: 
 
SET @cHEAD_CODE =  DBO.FN_ACT_TRAVTREE ('0000000014') ----ADD VARIABLE BY GAURI ON 17/4/2019
 
SELECT  A.AC_CODE, A.AC_NAME      
FROM LMV01106 A       
WHERE ( CHARINDEX ( HEAD_CODE,@cHEAD_CODE  ) > 0   ) ----REPLACE VARIABLE FROM FUNCTION BY GAURI ON 17/4/2019       
AND INACTIVE = 0 AND A.AC_NAME <> ''           


 GOTO LAST  
 
LAST:    
END
