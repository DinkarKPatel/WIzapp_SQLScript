CREATE FUNCTION FN_ACT_MAJORHEAD ( @CHEADCODE CHAR(10) )
RETURNS VARCHAR(MAX)
AS 
BEGIN
	DECLARE @CRETVAL CHAR(10)
	SET @CRETVAL = ''
	
	SELECT TOP 1 @CRETVAL = MAJOR_HEAD_CODE FROM HD01106 WHERE HEAD_CODE=@CHEADCODE AND HEAD_CODE<>MAJOR_HEAD_CODE
	
	IF ISNULL(@CRETVAL,'')<>''
		SELECT	@CRETVAL= DBO.FN_ACT_MAJORHEAD ( @CRETVAL )
	ELSE
		SET @CRETVAL=@CHEADCODE
		
	RETURN @CRETVAL
END
