CREATE PROCEDURE SP3S_SEARCH_ARTICLELIST    
(    
 @CJOINS VARCHAR(MAX),    
 @NITEMTYPE NUMERIC(1,0)=1,    
 @CACCODE VARCHAR(20)='',    
 @CWHERE VARCHAR(MAX)    
)    
AS    
BEGIN    
 DECLARE @CCMD NVARCHAR(MAX),@ART_SEARCH VARCHAR(20),@WHEREACCODE NVARCHAR(MAX), @iAll numeric(14,0),    
 @cNumVal VARCHAR(100)    ,@cSEARCH_ARTICLE_ON_SELECTED_FILTER varchar(1)
     
 SELECT @iAll= 0, @cNumVal=''    
     
 IF ISNULL(@cWHERE,'')<> ''     
 BEGIN    
   Select @iAll=  CHARINDEX ('$ALL$',@cWHERE)     
       
   SET @cWHERE=REPLACE(@cWHERE,'$ALL$','')    
       
       
   SET @cNumVal=(CASE WHEN ISNUMERIC(REPLACE(@cWhere,'%',''))=1 THEN '1' ELSE '0' END)    
 END    
--   DROP TABLE #ARTICLE_CODE
SELECT @cSEARCH_ARTICLE_ON_SELECTED_FILTER=value FROM config(nolock) WHERE CONFIG_OPTION='SEARCH_ARTICLE_ON_SELECTED_FILTER'  

   CREATE TABLE #ARTICLE_CODE(ARTICLE_CODE VARCHAR(50), ARTICLE_NAME VARCHAR(200),
   ARTICLE_NO VARCHAR(200),
   SUB_SECTION_NAME VARCHAR(200),
   SECTION_NAME VARCHAR(200),
   RATE NUMERIC(14,2) ,MRP NUMERIC(14,2), wholesale_price NUMERIC(14,2))


 SET @CCMD=N'SELECT TOP 50 A.ARTICLE_CODE  , A.ARTICLE_NAME,A.ARTICLE_NO,       
   B.SUB_SECTION_NAME, C.SECTION_NAME ,A.PURCHASE_PRICE AS [RATE] ,A.MRP,A.wholesale_price      
   FROM ARTICLE A (NOLOCK) 
   JOIN SECTIOND B (NOLOCK) ON A.SUB_SECTION_CODE = B.SUB_SECTION_CODE  
   JOIN SECTIONM C (NOLOCK) ON B.SECTION_CODE = C.SECTION_CODE   
   LEFT OUTER JOIN #ARTICLE_CODE AA ON AA.article_code=A.article_code
   WHERE AA.ARTICLE_CODE IS NULL AND A.ARTICLE_NO <> '''' AND ISNULL(ARTICLE_PURCHASE_MODE,1)=1 
   AND A.INACTIVE=0 AND C.ITEM_TYPE='+LTRIM(RTRIM(STR(@NITEMTYPE)))+'    
   AND (A.ARTICLE_NO LIKE ''%'+@CWHERE+'%'')'
   --OR A.ALIAS LIKE ''%'+@CWHERE+'%'' OR    
   -- A.ARTICLE_NAME LIKE ''%'+@CWHERE+'%'')'

   INSERT INTO #ARTICLE_CODE--(ARTICLE_CODE,ARTICLE_NAME,ARTICLE_NO,SUB_SECTION_NAME, SECTION_NAME ,RATE ,MRP,wholesale_price)
   EXEC SP_EXECUTESQL @cCMD

   IF ISNULL(@cSEARCH_ARTICLE_ON_SELECTED_FILTER,'')=''
   BEGIN
   SET @CCMD=N'SELECT TOP 50 A.ARTICLE_CODE ,  A.ARTICLE_NAME,   A.ARTICLE_NO,       
   B.SUB_SECTION_NAME, C.SECTION_NAME ,A.PURCHASE_PRICE AS [RATE] ,A.MRP,A.wholesale_price   
   FROM ARTICLE A (NOLOCK)      
   JOIN SECTIOND B (NOLOCK) ON A.SUB_SECTION_CODE = B.SUB_SECTION_CODE  
   JOIN SECTIONM C (NOLOCK) ON B.SECTION_CODE = C.SECTION_CODE     
   LEFT OUTER JOIN #ARTICLE_CODE AA ON AA.article_code=A.article_code
   WHERE AA.ARTICLE_CODE IS NULL AND A.ARTICLE_NO <> '''' AND (ISNULL(ARTICLE_PURCHASE_MODE,1)=1)    
   AND A.INACTIVE=0 AND C.ITEM_TYPE='+LTRIM(RTRIM(STR(@NITEMTYPE)))+'    
   AND B.sub_section_name LIKE ''%'+@CWHERE+'%'''
   INSERT INTO #ARTICLE_CODE--(ARTICLE_CODE,ARTICLE_NAME,ARTICLE_NO,SUB_SECTION_NAME, SECTION_NAME ,RATE ,MRP,wholesale_price)
   EXEC SP_EXECUTESQL @cCMD

   
   SET @CCMD=N'SELECT TOP 50 A.ARTICLE_CODE, A.ARTICLE_NAME, A.ARTICLE_NO,       
   B.SUB_SECTION_NAME, C.SECTION_NAME ,A.PURCHASE_PRICE AS [RATE] ,A.MRP,A.wholesale_price       
   FROM ARTICLE A (NOLOCK)      
   JOIN SECTIOND B (NOLOCK) ON A.SUB_SECTION_CODE = B.SUB_SECTION_CODE  
   JOIN SECTIONM C (NOLOCK) ON B.SECTION_CODE = C.SECTION_CODE     
   LEFT OUTER JOIN #ARTICLE_CODE AA ON AA.article_code=A.article_code
   WHERE AA.ARTICLE_CODE IS NULL AND  A.ARTICLE_NO <> '''' AND ISNULL(ARTICLE_PURCHASE_MODE,1)=1     
   AND A.INACTIVE=0 AND C.ITEM_TYPE='+LTRIM(RTRIM(STR(@NITEMTYPE)))+'    
   AND C.section_name LIKE ''%'+@CWHERE+'%'''

   INSERT INTO #ARTICLE_CODE--(ARTICLE_CODE,ARTICLE_NAME,ARTICLE_NO,SUB_SECTION_NAME, SECTION_NAME ,RATE ,MRP,wholesale_price)
   EXEC SP_EXECUTESQL @cCMD

   SET @CCMD=N'SELECT A.ARTICLE_CODE   ,A.ARTICLE_NAME,  A.ARTICLE_NO,       
   B.SUB_SECTION_NAME, C.SECTION_NAME ,A.PURCHASE_PRICE AS [RATE] ,A.MRP,A.wholesale_price    
   FROM ARTICLE A (NOLOCK)   
   JOIN SECTIOND B (NOLOCK) ON A.SUB_SECTION_CODE = B.SUB_SECTION_CODE  
   JOIN SECTIONM C (NOLOCK) ON B.SECTION_CODE = C.SECTION_CODE    
   LEFT JOIN ARTSUPPLIERS Z1(NOLOCK) ON Z1.ARTICLE_CODE=A.ARTICLE_CODE       
   LEFT OUTER JOIN #ARTICLE_CODE AA ON AA.article_code=A.article_code
   WHERE AA.ARTICLE_CODE IS NULL AND  A.ARTICLE_NO <> '''' AND (ISNULL(ARTICLE_PURCHASE_MODE,1)=2 AND  Z1.AC_CODE='''+@CACCODE+''')    
   AND A.INACTIVE=0 AND C.ITEM_TYPE='+LTRIM(RTRIM(STR(@NITEMTYPE)))  + '   AND (A.ARTICLE_NO LIKE ''%'+@CWHERE+'%'')' 

   INSERT INTO #ARTICLE_CODE--(ARTICLE_CODE,ARTICLE_NAME,ARTICLE_NO,SUB_SECTION_NAME, SECTION_NAME ,RATE ,MRP,wholesale_price)
   EXEC SP_EXECUTESQL @cCMD
  
   SET @CCMD=N'SELECT TOP 50 A.ARTICLE_CODE ,A.ARTICLE_NAME,    A.ARTICLE_NO,       
   B.SUB_SECTION_NAME, C.SECTION_NAME ,A.PURCHASE_PRICE AS [RATE] ,A.MRP,A.wholesale_price   
   FROM ARTICLE A (NOLOCK)     
   JOIN SECTIOND B (NOLOCK) ON A.SUB_SECTION_CODE = B.SUB_SECTION_CODE  
   JOIN SECTIONM C (NOLOCK) ON B.SECTION_CODE = C.SECTION_CODE  
   LEFT OUTER JOIN #ARTICLE_CODE AA ON AA.article_code=A.article_code
   WHERE AA.ARTICLE_CODE IS NULL AND  A.ARTICLE_NO <> '''' AND ISNULL(ARTICLE_PURCHASE_MODE,1)=1
   AND A.INACTIVE=0 AND C.ITEM_TYPE='+LTRIM(RTRIM(STR(@NITEMTYPE)))+'  
   AND (   str(A.PURCHASE_PRICE) LIKE ''%'+@CWHERE+'%'' OR str(A.wholesale_price) LIKE ''%'+@CWHERE+'%''  OR str(A.mrp) LIKE ''%'+@CWHERE+'%'') '  
   
   INSERT INTO #ARTICLE_CODE--(ARTICLE_CODE,ARTICLE_NAME,ARTICLE_NO,SUB_SECTION_NAME, SECTION_NAME ,RATE ,MRP,wholesale_price)
   EXEC SP_EXECUTESQL @cCMD
   END
   SELECT * FROM #ARTICLE_CODE ORDER BY ARTICLE_NO
END  
/*
CREATE PROCEDURE SP3S_SEARCH_ARTICLELIST  
(  
 @CJOINS VARCHAR(MAX),  
 @NITEMTYPE NUMERIC(1,0)=1,  
 @CACCODE VARCHAR(20)='',  
 @CWHERE VARCHAR(MAX)  
   
)  
AS  
BEGIN  
 DECLARE @CCMD NVARCHAR(MAX),@ART_SEARCH VARCHAR(2),@WHEREACCODE NVARCHAR(MAX), @iAll numeric(10,0),  
 @cNumVal VARCHAR(1)  
   
 SELECT @iAll= 0, @cNumVal=''  
   
 IF ISNULL(@cWHERE,'')<> ''   
 BEGIN  
   Select @iAll=  CHARINDEX ('$ALL$',@cWHERE)   
     
   SET @cWHERE=REPLACE(@cWHERE,'$ALL$','')  
     
     
   SET @cNumVal=(CASE WHEN ISNUMERIC(REPLACE(@cWhere,'%',''))=1 THEN '1' ELSE '0' END)  
 END  
 
 SET @CCMD=N'SELECT TOP 50 A.ARTICLE_CODE, A.ARTICLE_NAME, A.ARTICLE_NO,     
			B.SUB_SECTION_NAME, C.SECTION_NAME ,A.PURCHASE_PRICE AS [RATE] ,A.MRP,A.wholesale_price     
			FROM ARTICLE A (NOLOCK)    
			JOIN SECTIOND B (NOLOCK) ON A.SUB_SECTION_CODE = B.SUB_SECTION_CODE
			JOIN SECTIONM C (NOLOCK) ON B.SECTION_CODE = C.SECTION_CODE 
			LEFT JOIN ARTSUPPLIERS Z1(NOLOCK) ON Z1.ARTICLE_CODE=A.ARTICLE_CODE     
			WHERE A.ARTICLE_NO <> '''' AND (ISNULL(ARTICLE_PURCHASE_MODE,1)=1 OR  Z1.AC_CODE='''+@CACCODE+''')  
			AND A.INACTIVE=0 AND C.ITEM_TYPE='+LTRIM(RTRIM(STR(@NITEMTYPE)))+'  
			AND (A.ARTICLE_NO LIKE ''%'+@CWHERE+'%'' OR A.ALIAS LIKE ''%'+@CWHERE+'%'' OR  
			 A.ARTICLE_NAME LIKE ''%'+@CWHERE+'%'' OR 
			 C.section_name LIKE ''%'+@CWHERE+'%'' OR   
			 B.sub_section_name LIKE ''%'+@CWHERE+'%'' OR   
			str(A.PURCHASE_PRICE) LIKE ''%'+@CWHERE+'%'' OR str(A.wholesale_price) LIKE ''%'+@CWHERE+'%''  OR str(A.mrp) LIKE ''%'+@CWHERE+'%'') 
			ORDER BY a.ARTICLE_NO'

 --SET @CCMD=N'SELECT TOP 50 A.ARTICLE_CODE, A.ARTICLE_NAME, A.ARTICLE_NO,     
	--		B.SUB_SECTION_NAME, C.SECTION_NAME ,A.PURCHASE_PRICE AS [RATE] ,A.MRP,A.wholesale_price     
	--		FROM ARTICLE A (NOLOCK)    
	--		JOIN SECTIOND B (NOLOCK) ON A.SUB_SECTION_CODE = B.SUB_SECTION_CODE
	--		JOIN SECTIONM C (NOLOCK) ON B.SECTION_CODE = C.SECTION_CODE 
	--		LEFT JOIN ARTSUPPLIERS Z1(NOLOCK) ON Z1.ARTICLE_CODE=A.ARTICLE_CODE     
	--		WHERE A.ARTICLE_NO <> '''' AND (ISNULL(ARTICLE_PURCHASE_MODE,1)=1 OR  Z1.AC_CODE='''+@CACCODE+''')  
	--		AND A.INACTIVE=0 AND C.ITEM_TYPE='+LTRIM(RTRIM(STR(@NITEMTYPE)))+'  
	--		AND (A.ARTICLE_NO LIKE '''+@CWHERE+''' OR A.ALIAS LIKE '''+@CWHERE+''') OR  
	--		(('+LTRIM(RTRIM(str(@iAll)))+'>0 AND A.ARTICLE_NAME LIKE ''%'+@CWHERE+'%'') OR 
	--		('+LTRIM(RTRIM(str(@iAll)))+'>0 AND C.section_name LIKE ''%'+@CWHERE+'%'') OR   
	--		('+LTRIM(RTRIM(str(@iAll)))+'>0 AND B.sub_section_name LIKE ''%'+@CWHERE+'%'') OR   
	--		('+LTRIM(RTRIM(@cNumVal))+'=''1'' AND (str(A.PURCHASE_PRICE) LIKE ''%'+@CWHERE+'%'' OR str(A.wholesale_price) LIKE ''%'+@CWHERE+'%''  OR str(A.mrp) LIKE ''%'+@CWHERE+'%'')) )  '
PRINT  @CCMD  
EXEC SP_EXECUTESQL @CCMD
/*    
SELECT TOP 1 @ART_SEARCH=VALUE FROM CONFIG WHERE CONFIG_OPTION='SEARCH_MODE'  
IF ISNULL(@ART_SEARCH,'')='1'  
BEGIN  
	SET @CCMD=N' SELECT DISTINCT  TOP 50 * FROM   
		(   
			SELECT A.ARTICLE_CODE, A.ARTICLE_NAME, A.ALIAS AS [ARTICLE_NO],     
			B.SUB_SECTION_NAME, C.SECTION_NAME,A.PURCHASE_PRICE AS [RATE] ,A.MRP,A.wholesale_price    
			FROM ARTICLE A (NOLOCK)    
			JOIN SECTIOND B (NOLOCK) ON A.SUB_SECTION_CODE = B.SUB_SECTION_CODE   
			LEFT JOIN   
			(  
				SELECT AC_CODE,ARTICLE_CODE FROM ARTSUPPLIERS Z(NOLOCK)   
			)Z1 ON Z1.ARTICLE_CODE=A.ARTICLE_CODE   
			JOIN SECTIONM C (NOLOCK) ON B.SECTION_CODE = C.SECTION_CODE '+  
			@CJOINS +  
			N'WHERE A.ALIAS <> '''' AND (ISNULL(ARTICLE_PURCHASE_MODE,1)=1 OR  Z1.AC_CODE='''+@CACCODE+''')  
			AND A.INACTIVE=0  AND C.ITEM_TYPE='+LTRIM(RTRIM(STR(@NITEMTYPE)))+'  
                    
			UNION ALL   

			SELECT A.ARTICLE_CODE, A.ARTICLE_NAME, A.ARTICLE_NO,     
			B.SUB_SECTION_NAME, C.SECTION_NAME ,A.PURCHASE_PRICE AS [RATE] ,A.MRP,A.wholesale_price     
			FROM ARTICLE A (NOLOCK)    
			JOIN SECTIOND B (NOLOCK) ON A.SUB_SECTION_CODE = B.SUB_SECTION_CODE  
			LEFT JOIN   
			(  
			SELECT AC_CODE,ARTICLE_CODE FROM ARTSUPPLIERS Z(NOLOCK)   
			)Z1 ON Z1.ARTICLE_CODE=A.ARTICLE_CODE     
			JOIN SECTIONM C (NOLOCK) ON B.SECTION_CODE = C.SECTION_CODE ' +  
			@CJOINS +  
			N'WHERE A.ARTICLE_NO <> ''''  AND (ISNULL(ARTICLE_PURCHASE_MODE,1)=1 OR  Z1.AC_CODE='''+@CACCODE+''')  
			AND A.INACTIVE=0     
			AND C.ITEM_TYPE='+LTRIM(RTRIM(STR(@NITEMTYPE)))+'  
		) A   
		WHERE ('+LTRIM(RTRIM(str(@iAll)))+'=0 AND (A.ARTICLE_NO LIKE '''+@CWHERE+''')) OR  
		('+LTRIM(RTRIM(str(@iAll)))+'>0 AND A.ARTICLE_NAME LIKE ''%'+@CWHERE+'%'') OR 
		('+LTRIM(RTRIM(str(@iAll)))+'>0 AND A.section_name LIKE ''%'+@CWHERE+'%'') OR   
		('+LTRIM(RTRIM(str(@iAll)))+'>0 AND A.sub_section_name LIKE ''%'+@CWHERE+'%'') OR   
		('+LTRIM(RTRIM(@cNumVal))+'=''1'' AND (str(A.rate) LIKE ''%'+@CWHERE+'%'' OR str(A.wholesale_price) LIKE ''%'+@CWHERE+'%''  OR str(A.mrp) LIKE ''%'+@CWHERE+'%''))   
    
		UNION
	
		SELECT DISTINCT  TOP 50 * FROM   
		(   
			SELECT A.ARTICLE_CODE, A.ARTICLE_NAME, A.ALIAS AS [ARTICLE_NO],     
			B.SUB_SECTION_NAME, C.SECTION_NAME,A.PURCHASE_PRICE AS [RATE]   ,A.MRP,A.wholesale_price    
			FROM ARTICLE A (NOLOCK)    
			JOIN SECTIOND B (NOLOCK) ON A.SUB_SECTION_CODE = B.SUB_SECTION_CODE    
			LEFT JOIN   
			(  
			SELECT AC_CODE,ARTICLE_CODE FROM ARTSUPPLIERS Z(NOLOCK)   
			)Z1 ON Z1.ARTICLE_CODE=A.ARTICLE_CODE  
			JOIN SECTIONM C (NOLOCK) ON B.SECTION_CODE = C.SECTION_CODE '+  
			@CJOINS +  
			N'WHERE A.ALIAS <> '''' AND (ISNULL(ARTICLE_PURCHASE_MODE,1)=1 OR  Z1.AC_CODE='''+@CACCODE+''')  
			AND A.INACTIVE=0  AND C.ITEM_TYPE='+LTRIM(RTRIM(STR(@NITEMTYPE)))+'  
			UNION   
			SELECT A.ARTICLE_CODE, A.ARTICLE_NAME, A.ARTICLE_NO,     
			B.SUB_SECTION_NAME, C.SECTION_NAME ,A.PURCHASE_PRICE AS [RATE] ,A.MRP,A.wholesale_price     
			FROM ARTICLE A (NOLOCK)    
			JOIN SECTIOND B (NOLOCK) ON A.SUB_SECTION_CODE = B.SUB_SECTION_CODE  
			LEFT JOIN   
			(  
			SELECT AC_CODE,ARTICLE_CODE FROM ARTSUPPLIERS Z(NOLOCK)   
			)Z1 ON Z1.ARTICLE_CODE=A.ARTICLE_CODE    
			JOIN SECTIONM C (NOLOCK) ON B.SECTION_CODE = C.SECTION_CODE ' +  
			@CJOINS +  
			N'WHERE A.ARTICLE_NO <> '''' AND (ISNULL(ARTICLE_PURCHASE_MODE,1)=1 OR  Z1.AC_CODE='''+@CACCODE+''')  
			AND A.INACTIVE=0   AND C.ITEM_TYPE='+LTRIM(RTRIM(STR(@NITEMTYPE)))+'  
		) A   
		WHERE ('+LTRIM(RTRIM(str(@iAll)))+'=0 AND (A.ARTICLE_NO LIKE '''+@CWHERE+''')) OR 
		('+LTRIM(RTRIM(str(@iAll)))+'>0 AND A.ARTICLE_NAME LIKE ''%'+@CWHERE+'%'') OR 
		('+LTRIM(RTRIM(str(@iAll)))+'>0 AND A.section_name LIKE ''%'+@CWHERE+'%'') OR   
		('+LTRIM(RTRIM(str(@iAll)))+'>0 AND A.sub_section_name LIKE ''%'+@CWHERE+'%'') OR  
		('+LTRIM(RTRIM(@cNumVal))+'=''1'' AND (str(A.rate) LIKE ''%'+@CWHERE+'%'' OR str(A.wholesale_price) LIKE ''%'+@CWHERE+'%''  OR str(A.mrp) LIKE ''%'+@CWHERE+'%'')) '  
 PRINT  @CCMD  
 EXEC SP_EXECUTESQL @CCMD   
END  
ELSE  
BEGIN  
  SET @CCMD=N' SELECT DISTINCT  TOP 50 * FROM   
		(   
                      
			SELECT A.ARTICLE_CODE, A.ARTICLE_NAME, A.ALIAS AS [ARTICLE_NO],     
			B.SUB_SECTION_NAME, C.SECTION_NAME,A.PURCHASE_PRICE AS [RATE]  ,A.MRP,A.wholesale_price     
			FROM ARTICLE A (NOLOCK)    
			JOIN SECTIOND B (NOLOCK) ON A.SUB_SECTION_CODE = B.SUB_SECTION_CODE  
			LEFT JOIN   
			(  
			SELECT AC_CODE,ARTICLE_CODE FROM ARTSUPPLIERS Z(NOLOCK)   
			)Z1 ON Z1.ARTICLE_CODE=A.ARTICLE_CODE     
			JOIN SECTIONM C (NOLOCK) ON B.SECTION_CODE = C.SECTION_CODE '+  
			@CJOINS +  
			N'WHERE A.ALIAS <> '''' AND (ISNULL(ARTICLE_PURCHASE_MODE,1)=1 OR  Z1.AC_CODE='''+@CACCODE+''')   
			AND A.INACTIVE=0  AND C.ITEM_TYPE='+LTRIM(RTRIM(STR(@NITEMTYPE)))+'  

			UNION ALL   

			SELECT A.ARTICLE_CODE, A.ARTICLE_NAME, A.ARTICLE_NO,     
			B.SUB_SECTION_NAME, C.SECTION_NAME ,A.PURCHASE_PRICE AS [RATE]  ,A.MRP,A.wholesale_price    
			FROM ARTICLE A (NOLOCK)    
			JOIN SECTIOND B (NOLOCK) ON A.SUB_SECTION_CODE = B.SUB_SECTION_CODE   
			LEFT JOIN   
			(  
			SELECT AC_CODE,ARTICLE_CODE FROM ARTSUPPLIERS Z(NOLOCK)   
			)Z1 ON Z1.ARTICLE_CODE=A.ARTICLE_CODE    
			JOIN SECTIONM C (NOLOCK) ON B.SECTION_CODE = C.SECTION_CODE ' +  
			@CJOINS +  
			N'WHERE A.ARTICLE_NO <> '''' AND (ISNULL(ARTICLE_PURCHASE_MODE,1)=1 OR  Z1.AC_CODE='''+@CACCODE+''')   
			AND A.INACTIVE=0  AND C.ITEM_TYPE='+LTRIM(RTRIM(STR(@NITEMTYPE)))+'    
		) A   
		WHERE ('+LTRIM(RTRIM(str(@iAll)))+'=0 AND (A.ARTICLE_NO LIKE '''+@CWHERE+''')) OR 
		('+LTRIM(RTRIM(str(@iAll)))+'>0 AND A.ARTICLE_NAME LIKE ''%'+@CWHERE+'%'') OR 
		('+LTRIM(RTRIM(str(@iAll)))+'>0 AND A.section_name LIKE ''%'+@CWHERE+'%'') OR   
		('+LTRIM(RTRIM(str(@iAll)))+'>0 AND A.sub_section_name LIKE ''%'+@CWHERE+'%'') OR  
		('+LTRIM(RTRIM(@cNumVal))+'=''1'' AND (str(A.rate) LIKE ''%'+@CWHERE+'%'' OR str(A.wholesale_price) LIKE ''%'+@CWHERE+'%''  OR str(A.mrp) LIKE ''%'+@CWHERE+'%''))'         
  
                 
 PRINT  @CCMD  
 EXEC SP_EXECUTESQL @CCMD  
    
END  
*/  
      
END
*/