CREATE VIEW VW_FLOOR_STK_TRANSFER_LIST

AS   
 SELECT T1.MEMO_NO 
 ,T1.MEMO_DT AS MEMO_DATE   
 ,T4.BIN_NAME AS   TARGET_BIN
 ,CASE WHEN T1.CANCELLED =0 THEN '' ELSE 'CANCELLED' END AS CANCELLED  
 ,T3.BIN_NAME AS SOURCE_BIN ,T1.BIN_ID,T1.TARGET_BIN_ID,T3.BIN_ID AS SOURCE_BIN_ID,T1.MEMO_ID ,T1.FIN_YEAR ,
 T1.REMARKS ,SUM(T2.QUANTITY) AS QUANTITY,T1.receipt_dt,t1.location_Code
 FROM FLOOR_ST_MST T1(NOLOCK) 
 JOIN  FLOOR_ST_DET T2(NOLOCK) ON T1.MEMO_ID= T2.MEMO_ID 
 JOIN BIN T3(NOLOCK) ON T3.BIN_ID = T1.BIN_ID   
 JOIN BIN T4 ON T4.BIN_ID = T1.TARGET_BIN_ID  
 GROUP BY T1.MEMO_NO ,T1.MEMO_DT  
 ,CASE WHEN T1.CANCELLED =0 THEN '' ELSE 'CANCELLED' END   
 ,T3.BIN_NAME ,T4.BIN_NAME,T1.BIN_ID,T1.TARGET_BIN_ID,T3.BIN_ID ,T1.MEMO_ID ,T1.FIN_YEAR , T1.REMARKS,T1.receipt_dt,t1.location_code
