CREATE PROCEDURE  SP_RPT_CARD_COLLECTION
(
 @CFORMDT DATETIME,
 @CTODT DATETIME,
 @CLOCID VARCHAR(5)
)
--WITH ENCRYPTION

AS
BEGIN
	SELECT C.DEPT_ID,C.DEPT_NAME,B.PAYMODE_NAME,A.BATCH_DT , BATCH_CLOSING_NO,AMOUNT
	FROM CC_BATCH_COLLECTION A
	JOIN PAYMODE_MST B ON A.PAYMODE_CODE = B.PAYMODE_CODE 
	JOIN LOCATION C ON A.DEPT_ID= C.DEPT_ID
	WHERE BATCH_DT BETWEEN @CFORMDT AND  @CTODT AND (C.DEPT_ID= @CLOCID OR @CLOCID='')
END
