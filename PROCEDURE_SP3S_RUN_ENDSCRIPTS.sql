create PROCEDURE SP3S_RUN_ENDSCRIPTS
AS
BEGIN

	EXEC SP3S_XTREME_REPORTING_EXP_GSTREPS
	
	---- Create View lmv01106 & then its Trigger

	EXEC SP3S_UPDATE_CUS_GST_NO_CMM

	IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.CHECK_CONSTRAINTS WHERE CONSTRAINT_NAME='chk_postact_voucher_link_dup')
		ALTER TABLE POSTACT_VOUCHER_LINK WITH NOCHECK ADD CONSTRAINT chk_postact_voucher_link_dup CHECK (DBO.FN_CHECK_POSTACT(MEMO_ID,XN_TYPE,VM_ID)<>0) 
	
	IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.CHECK_CONSTRAINTS WHERE CONSTRAINT_NAME='chk_UNQ_ART_BOM_JOB')
		ALTER TABLE [dbo].[art_bom]  WITH NOCHECK ADD  CONSTRAINT [chk_UNQ_ART_BOM_JOB] CHECK  (([dbo].[FN_CheckARTBOM]([article_code],[bom_article_code],[job_code])<>(0)))
	
	IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.CHECK_CONSTRAINTS WHERE CONSTRAINT_NAME='CHK_LMP01106_DUP_CUSTCODE')
		ALTER TABLE LMP01106 WITH NOCHECK ADD CONSTRAINT CHK_LMP01106_DUP_CUSTCODE CHECK (DBO.FN_CHECK_LMP_DUP_CUSTOMER_CODE(CUSTOMER_CODE,AC_CODE)<>0) 

    IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.CHECK_CONSTRAINTS WHERE CONSTRAINT_NAME='CheckDUp_art_para1')
	   ALTER TABLE [dbo].art_para1  WITH NOCHECK ADD  CONSTRAINT CheckDUp_art_para1 CHECK  ([dbo].[FN_CheckDUp_art_para1]([row_id])<>0)

  
	---- Had to retain this step because it was coming again & again in structure change
	---- Main databasse is having this constraint but Application drop ping it but not creating it because of this comment (Sanjay:13-08-20)
	--IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.CHECK_CONSTRAINTS WHERE CONSTRAINT_NAME='chk_parcel_dup')
	--	ALTER TABLE [dbo].parcel_det  WITH NOCHECK ADD  CONSTRAINT chk_parcel_dup CHECK  ([dbo].[FN_CheckDUpParcel]([row_id])<>0)
	
	IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.CHECK_CONSTRAINTS WHERE CONSTRAINT_NAME='unq_gv_gen_det')
		ALTER TABLE [dbo].[gv_gen_det]  WITH NOCHECK ADD  CONSTRAINT [unq_gv_gen_det] CHECK  (([DBO].[FN3S_CHECK_DUP_GV]([row_id],[gv_srno],[gv_scratch_no])<>(1)))
	
	IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.CHECK_CONSTRAINTS WHERE CONSTRAINT_NAME='CHK_UNIQUE_PRODUCT_CODE')
		ALTER TABLE [dbo].[WSL_ORDER_DET]  WITH NOCHECK ADD  CONSTRAINT [CHK_UNIQUE_PRODUCT_CODE] CHECK  (([DBO].[FN3S_CHECK_DUP_WOD_PRODUCT_CODE]([ROW_ID],[PRODUCT_CODE])<>(1)))
	
	IF NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.CHECK_CONSTRAINTS WHERE CONSTRAINT_NAME='CK_Dup_Report')
		ALTER TABLE [dbo].[rep_mst]  WITH NOCHECK ADD  CONSTRAINT [CK_Dup_Report] CHECK  (([dbo].[FN3SCheckDupReport]([user_code],[ref_rep_id])<>(0)))

	EXEC SP3S_INSERT_INTO_SD_ATTR_AVATAR

	EXEC SPWOW_INS_AGEINGCATEGORY_COLS_INREPORTS
	
END