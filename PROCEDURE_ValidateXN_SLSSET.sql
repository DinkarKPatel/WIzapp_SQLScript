CREATE PROCEDURE VALIDATEXN_SLSSET
(
		@CXNID VARCHAR(40),
		@NUPDATEMODE INT,					
		@CCMD VARCHAR(1000) OUTPUT
		--*** PARAMETERS :
		--*** @CXNID - TRANSACTION ID ( MEMO ID OF MASTER TABLE )
)
--WITH ENCRYPTION
AS
BEGIN
	DECLARE @CSLSMSTTABLE TABLE ( SLS_MEMO_NO VARCHAR(10), SLS_MEMO_DT DATETIME, 
								  SLS_FROM_DT DATETIME, SLS_TO_DT DATETIME )
	
	INSERT @CSLSMSTTABLE
	SELECT SLS_MEMO_NO, SLS_MEMO_DT, SLS_FROM_DT, SLS_TO_DT
	FROM SLSMST WHERE SLS_MEMO_NO = @CXNID

	SET @CCMD = ''

	--IF EXISTS (SELECT PEM_MEMO_ID FROM @CCIMTABLE WHERE FIN_YEAR<>'01'+DBO.FN_GETFINYEAR(PEM_MEMO_DT))
	--	SET @CCMD=@CCMD+(CASE WHEN @CCMD<>'' THEN ',' ELSE '' END )+'MISMATCH BETWEEN MEMO DATE & FIN YEAR ..... '

	--IF EXISTS (SELECT PEM_MEMO_ID FROM @CCIMTABLE WHERE FIN_YEAR<>SUBSTRING(PEM_MEMO_DT,3,5))
	--	SET @CCMD=@CCMD+(CASE WHEN @CCMD<>'' THEN ',' ELSE '' END )+'MISMATCH BETWEEN MEMO ID & FIN YEAR ..... '
END_PROC:
END
--*********************************************** END OF PROCEDURE VALIDATEXN_SLSSET
