CREATE VIEW VW_WL_VOUCHERENTRY_QBF

AS

SELECT A.[VM_ID],A.[VOUCHER_NO],A.[VOUCHER_DT],A.[VOUCHER_CODE],A.[DRTOTAL],A.[CRTOTAL],A.[BILL_NO]
      ,A.[CASH_VOUCHER],A.[BILL_DT],A.[BILL_TYPE],A.[REF_NO],A.[COMPANY_CODE],A.[SALE_VOUCHER],A.[DEPT_ID]
      ,CASE WHEN A.[SENT_TO_HO]=1 THEN 'UPDATED' ELSE '' END SENT_TO_HO,A.[BILL_ID]
      ,CASE WHEN A.CANCELLED = 1 THEN 'CANCELLED' ELSE '' END CANCELLED 
      ,A.[BILL_AC_CODE]
      ,A.[APPROVED]
      ,A.[REF_VM_ID]
      ,A.[USER_CODE]
      ,A.[REMINDER_DAYS]
      --,A.[SENT_TO_LOC]
      ,B.VD_ID,B.AC_CODE,B.CREDIT_AMOUNT,B.DEBIT_AMOUNT,B.NARRATION,B.VS_AC_CODE,B.X_TYPE
      ,U.USERNAME
      ,C.AC_NAME
      ,C.ADDRESS1,C.ADDRESS2,C.AREA_CODE,C.AREA_NAME,C.CITY,C.STATE,C.CLOSING_BALANCE,C.CLOSING_BALANCE_CR_DR,C.CREDIT_DAYS
      ,C.CREDIT_LIMIT,C.PAN_NO,C.PHONES_O,C.PHONES_R,C.PINCODE,C.MOBILE,C.TIN_NO
      ,L.DEPT_NAME
      
  FROM [VM01106] A
  JOIN VD01106 B (NOLOCK) ON A.VM_ID=B.VM_ID
  JOIN LMV01106 C (NOLOCK) ON C.AC_CODE=B.AC_CODE
  JOIN USERS U (NOLOCK) ON U.USER_CODE=A.USER_CODE
  JOIN LOCATION L (NOLOCK) ON A.DEPT_ID=L.DEPT_ID
  JOIN COMPANY COM (NOLOCK) ON 1=1 AND COM.COMPANY_CODE='01'
