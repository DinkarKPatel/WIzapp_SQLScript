CREATE PROCEDURE SP3S_PRINTPAYMENT_GST  
(  
 @CXN_TYPE VARCHAR(10)='',  
 @CXN_ID VARCHAR(100)=''  
)  
AS  
BEGIN  

      DECLARE @CLOCID VARCHAR(5),@CHODEPT_ID VARCHAR(5)

	  SELECT @CLOCID=VALUE FROM CONFIG WHERE CONFIG_OPTION ='LOCATION_ID'
	  SELECT @CHODEPT_ID=VALUE FROM CONFIG WHERE CONFIG_OPTION ='HO_LOCATION_ID'
    
	IF OBJECT_ID ('SP3S_PRINTPURCHASE_GST_CUSTOM','P') IS NOT NULL
	BEGIN
		 exec SP3S_PRINTPURCHASE_GST_CUSTOM  @CXN_TYPE,@CXN_ID 
	END
	ELSE
	begin
	  
	  IF @CLOCID=@CHODEPT_ID AND EXISTS (SELECT TOP 1 'U' FROM PIM01106 (NOLOCK) WHERE MRR_ID=@CXN_ID AND INV_MODE=2)
	   EXEC SP3S_PRINTPURCHASE_GST_HO @CXN_TYPE,@CXN_ID 
	   ELSE 
       EXEC SP3S_PRINTPURCHASE_GST @CXN_TYPE,@CXN_ID 

   end
END


