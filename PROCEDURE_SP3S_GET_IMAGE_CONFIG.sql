CREATE PROCEDURE SP3S_GET_IMAGE_CONFIG
AS
BEGIN
		DECLARE @CIAMGEFILTER VARCHAR(MAX)
		SET @CIAMGEFILTER=''
		IF EXISTS (SELECT TOP 1 'U' FROM IMAGE_INFO_CONFIG WHERE ISNULL(PRODUCT,0) =1 )  
		BEGIN  
			SET @CIAMGEFILTER=@CIAMGEFILTER+' IMAGE_INFO.PRODUCT_CODE '  
		END  
		    
		IF EXISTS (SELECT TOP 1 'U' FROM IMAGE_INFO_CONFIG WHERE ISNULL(ARTICLE ,0) =1 )  
		BEGIN  
			SET @CIAMGEFILTER=@CIAMGEFILTER+' AND IMAGE_INFO.ARTICLE_CODE'  
		END  
		
		IF EXISTS (SELECT TOP 1 'U' FROM IMAGE_INFO_CONFIG WHERE ISNULL(PARA1 ,0) =1)  
		BEGIN  
			SET @CIAMGEFILTER=@CIAMGEFILTER+' AND IMAGE_INFO.PARA1_CODE'  
		END
  
		IF EXISTS (SELECT TOP 1 'U' FROM IMAGE_INFO_CONFIG WHERE ISNULL(PARA2 ,0) =1)  
		BEGIN  
			SET @CIAMGEFILTER=@CIAMGEFILTER+' AND IMAGE_INFO.PARA2_CODE'  
		END

		IF EXISTS (SELECT TOP 1 'U' FROM IMAGE_INFO_CONFIG WHERE ISNULL(PARA3 ,0) =1 )  
		BEGIN  
			SET @CIAMGEFILTER=@CIAMGEFILTER+' AND IMAGE_INFO.PARA3_CODE'  
		END

		IF EXISTS (SELECT TOP 1 'U' FROM IMAGE_INFO_CONFIG WHERE ISNULL(PARA4 ,0) =1)  
		BEGIN  
			SET @CIAMGEFILTER=@CIAMGEFILTER+' AND  IMAGE_INFO.PARA4_CODE'  
		END
		IF EXISTS (SELECT TOP 1 'U' FROM IMAGE_INFO_CONFIG WHERE ISNULL(PARA5 ,0) =1)  
		BEGIN  
			SET @CIAMGEFILTER=@CIAMGEFILTER+' AND  IMAGE_INFO.PARA5_CODE'  
		END

		IF EXISTS (SELECT TOP 1 'U' FROM IMAGE_INFO_CONFIG WHERE ISNULL(PARA6 ,0) =1)  
		BEGIN  
			SET @CIAMGEFILTER=@CIAMGEFILTER+' AND IMAGE_INFO.PARA6_CODE'  
		END

		SELECT ISNULL(@CIAMGEFILTER,'') AS IMAGE_CONFIG
END

