

-- PROCEDURE SP_WL_ARTICLE_DATABINDING
-- RETURNS A SET OF TABLES FOR THE DATABINDING FOR ARTICLE MODULE
-- MODULE NAME - ARTICLE MASTER
CREATE PROCEDURE SP_WL_ARTICLE_DATABINDING
(
	@CARTICLECODE VARCHAR(10)=''
)
--WITH ENCRYPTION
AS
BEGIN
	----DATATABLE 'TARTICLE'
	SELECT TOP 1 A.*, B.SUB_SECTION_NAME,  C.SECTION_NAME, D.UOM_NAME, D.UOM_TYPE,
	   A.PARA1_CODE, A.PARA2_CODE, A.PARA3_CODE, A.PARA4_CODE, A.PARA5_CODE, A.PARA6_CODE, 
	   P1.PARA1_NAME, P2.PARA2_NAME, P3.PARA3_NAME, P4.PARA4_NAME, P5.PARA5_NAME, P6.PARA6_NAME, 
	   E.USERNAME, F.USERNAME AS 'EDIT_USERNAME' ,B.SECTION_CODE
 FROM ARTICLE A (NOLOCK)  
 JOIN SECTIOND B (NOLOCK) ON A.SUB_SECTION_CODE = B.SUB_SECTION_CODE   
 JOIN SECTIONM C (NOLOCK) ON B.SECTION_CODE = C.SECTION_CODE   
 JOIN UOM D  (NOLOCK) ON A.UOM_CODE = D.UOM_CODE   
 JOIN USERS E (NOLOCK) ON A.USER_CODE = E.USER_CODE
 JOIN USERS F (NOLOCK) ON A.EDT_USER_CODE = F.USER_CODE
 --LEFT OUTER JOIN SKU G (NOLOCK) ON A.ARTICLE_CODE = G.ARTICLE_CODE
 LEFT OUTER JOIN PARA1 P1 (NOLOCK) ON A.PARA1_CODE = P1.PARA1_CODE
 LEFT OUTER JOIN PARA2 P2 (NOLOCK) ON A.PARA2_CODE = P2.PARA2_CODE
 LEFT OUTER JOIN PARA3 P3 (NOLOCK) ON A.PARA3_CODE = P3.PARA3_CODE
 LEFT OUTER JOIN PARA4 P4 (NOLOCK) ON A.PARA4_CODE = P4.PARA4_CODE
 LEFT OUTER JOIN PARA5 P5 (NOLOCK) ON A.PARA5_CODE = P5.PARA5_CODE
 LEFT OUTER JOIN PARA6 P6 (NOLOCK) ON A.PARA6_CODE = P6.PARA6_CODE
 WHERE A.ARTICLE_CODE = @CARTICLECODE  


	----DATATABLE 'SIZE'
	SELECT	A.*, 
			B.PARA2_NAME,
			B.PARA2_ORDER
	FROM ART_DET A	(NOLOCK)
	JOIN PARA2 B	(NOLOCK) ON A.PARA2_CODE = B.PARA2_CODE 
	WHERE A.ARTICLE_CODE = @CARTICLECODE
	ORDER BY B.PARA2_ORDER

	----DATATABLE 'COLOR'
	SELECT	A.*,
			B.PARA1_NAME
	FROM ART_PARA1 A	(NOLOCK)
	JOIN PARA1 B		(NOLOCK) ON A.PARA1_CODE = B.PARA1_CODE   
	WHERE A.ARTICLE_CODE = @CARTICLECODE
	ORDER BY B.PARA1_NAME
END
--**************************************** END OF PROCEDURE SP_WL_ARTICLE_DATABINDING
