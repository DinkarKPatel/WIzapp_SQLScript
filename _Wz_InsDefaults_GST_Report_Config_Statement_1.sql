SET NOCOUNT ON
IF OBJECT_ID('GST_REPORT_CONFIG_RESOLVE','U') IS NOT NULL
   DROP TABLE GST_REPORT_CONFIG_RESOLVE
SELECT * INTO GST_REPORT_CONFIG_RESOLVE FROM GST_REPORT_CONFIG (NOLOCK)  

--IF OBJECT_ID('VI_GST_REPORT_CONFIG','U') IS NULL
--   SELECT TOP 0 * INTO VI_GST_REPORT_CONFIG FROM GST_REPORT_CONFIG
--IF NOT EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME='VI_GST_REPORT_CONFIG' AND COLUMN_NAME ='LAST_UPDATE')   
--   ALTER TABLE VI_GST_REPORT_CONFIG ADD LAST_UPDATE DATETIME
--DELETE VI_GST_REPORT_CONFIG
--INSERT VI_GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1,LAST_UPDATE) 
--SELECT XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1,GETDATE() FROM GST_REPORT_CONFIG


IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='WSL' AND [REPORT_NAME]='GST-LASER/INKJET-A4-PORTRAIT-1ACROSS' AND [FILE_NAME]='GSTWSLA4PSCGST.RDLC')
   INSERT GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,[FILE_NAME],[DEFAULT1]) 
   SELECT 'WSL','GST-LASER/INKJET-A4-PORTRAIT-1ACROSS','GSTWSLA4PSCGST.RDLC',0

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='SLS' AND [REPORT_NAME]='GST-LASER-A5-PORTRAIT-1ACROSS' AND [FILE_NAME]='GSTSLSA5P1.RDLC')
   INSERT GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,[FILE_NAME],[DEFAULT1]) 
   SELECT 'SLS','GST-LASER-A5-PORTRAIT-1ACROSS','GSTSLSA5P1.RDLC',0
   
IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='SLS' AND [REPORT_NAME]='GST-LASER-A5-PORTRAIT-2ACROSS' AND [FILE_NAME]='GSTSLSA5P2.RDLC')
   INSERT GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,[FILE_NAME],[DEFAULT1]) 
   SELECT 'SLS','GST-LASER-A5-PORTRAIT-2ACROSS','GSTSLSA5P2.RDLC',0
   
IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='SLS' AND [REPORT_NAME]='GST-THERMAL-PORTRAIT' AND [FILE_NAME]='GSTSLS80MM.RDLC')
   INSERT GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,[FILE_NAME],[DEFAULT1]) 
   SELECT 'SLS','GST-THERMAL-PORTRAIT','GSTSLS80MM.RDLC',0

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='SLS' AND [REPORT_NAME]='GST-DMP-1ACROSS' AND [FILE_NAME]='GSTDMP1ACROSS.PRG')
   INSERT GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,[FILE_NAME],[DEFAULT1]) 
   SELECT 'SLS','GST-DMP-1ACROSS','GSTDMP1ACROSS.PRG',0
   
IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='SLS' AND [REPORT_NAME]='GST-DMP-2ACROSS' AND [FILE_NAME]='GSTDMP2ACROSS.PRG')
   INSERT GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,[FILE_NAME],[DEFAULT1]) 
   SELECT 'SLS','GST-DMP-2ACROSS','GSTDMP2ACROSS.PRG',0

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='SLS' AND [REPORT_NAME]='GST-40COL-DMP-1ACROSS' AND [FILE_NAME]='GSTDMP40COL.PRG')
   INSERT GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,[FILE_NAME],[DEFAULT1]) 
   SELECT 'SLS','GST-40COL-DMP-1ACROSS','GSTDMP40COL.PRG',0

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='ARC' AND [REPORT_NAME]='GST-THERMAL-ARC-PORTRAIT' AND [FILE_NAME]='GSTARC80MM.RDLC')
   INSERT GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,[FILE_NAME],[DEFAULT1]) 
   SELECT 'ARC','GST-THERMAL-ARC-PORTRAIT','GSTARC80MM.RDLC',0

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='SLS' AND REPORT_NAME='GST-THERMAL-PORTRAIT-WITHCUT' AND [FILE_NAME]='GSTSLS80MMCUT.RDLC')
   INSERT GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1)
   SELECT 'SLS','GST-THERMAL-PORTRAIT-WITHCUT','GSTSLS80MMCUT.RDLC',0

IF EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='SLS' AND REPORT_NAME='GST-LASER-A4-PORTRAIT-1ACROSS_1-FORMAT' AND [FILE_NAME]='GSTSLSA4P1SCGSTII.RDLC')
   DELETE GST_REPORT_CONFIG WHERE XN_TYPE='SLS' AND REPORT_NAME='GST-LASER-A4-PORTRAIT-1ACROSS_1-FORMAT' AND [FILE_NAME]='GSTSLSA4P1SCGSTII.RDLC'

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='SLS' AND REPORT_NAME='GST-LASER-A4-PORTRAIT-1ACROSS_1-FORMAT' AND [FILE_NAME]='GSTSLSA4P1.RDLC')
   INSERT GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1)
   SELECT 'SLS','GST-LASER-A4-PORTRAIT-1ACROSS_1-FORMAT','GSTSLSA4P1.RDLC',0

IF EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='SLS' AND REPORT_NAME='GST-LASER-A4-PORTRAIT-1ACROSS_2-FORMAT' AND [FILE_NAME]='GSTSLSA4P1.RDLC')
   DELETE GST_REPORT_CONFIG WHERE XN_TYPE='SLS' AND REPORT_NAME='GST-LASER-A4-PORTRAIT-1ACROSS_2-FORMAT' AND [FILE_NAME]='GSTSLSA4P1.RDLC'

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='SLS' AND REPORT_NAME='GST-LASER-A4-PORTRAIT-1ACROSS_2-FORMAT' AND [FILE_NAME]='GSTSLSA4P1SCGSTII.RDLC')
  INSERT GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1)
  SELECT 'SLS','GST-LASER-A4-PORTRAIT-1ACROSS_2-FORMAT','GSTSLSA4P1SCGSTII.RDLC',0

--GSTPRTA4P1ICGST.RDLC
IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='PRT' AND REPORT_NAME='GST-LASER/INKJET-A4-PORTRAIT-1ACROSS' AND [FILE_NAME]='GSTPRTA4P1SCGST.RDLC')
   INSERT GST_REPORT_CONFIG(XN_TYPE,[REPORT_NAME],[FILE_NAME],[DEFAULT1]) 
   SELECT 'PRT','GST-LASER/INKJET-A4-PORTRAIT-1ACROSS','GSTPRTA4P1SCGST.RDLC',0  

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='WSL' AND [REPORT_NAME]='GST-LASER/INKJET-A4-PORTRAIT-1FORMAT' AND [FILE_NAME]='GSTWSLA4P1BILLSUPLD.RDLC')
   INSERT GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,[FILE_NAME],[DEFAULT1]) 
   SELECT 'WSL','GST-LASER/INKJET-A4-PORTRAIT-1FORMAT','GSTWSLA4P1BILLSUPLD.RDLC',0

IF EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='WSL' AND [REPORT_NAME]='GST-LASER/INKJET-A4-PORTRAIT-1FORMAT' AND [FILE_NAME]='GSTWSLA4P1BILLSUPLD.RDLC')
   DELETE GST_REPORT_CONFIG WHERE [FILE_NAME]='GSTWSLA4P1BILLSUPLD.RDLC'

IF EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='WLS')
   DELETE GST_REPORT_CONFIG WHERE XN_TYPE='WLS' 

IF EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='ARC' AND [FILE_NAME]='GSTARCA4P1SCGST')
   DELETE FROM GST_REPORT_CONFIG WHERE XN_TYPE='ARC' AND [FILE_NAME]='GSTARCA4P1SCGST'

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='ARC' AND [FILE_NAME]='GSTARCA4P1SCGST.RDLC')
   INSERT GST_REPORT_CONFIG(XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1)
   SELECT 'ARC','GST-LASER-A4-PORTRAIT-CUSTOMER_RECEIPT','GSTARCA4P1SCGST.RDLC',1

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='PUR' AND [FILE_NAME]='GSTPURA4P1SCGST.RDLC')
   INSERT GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,FILE_NAME,DEFAULT1) SELECT 'PUR','GST-LASER-A4-PORTRAIT','GSTPURA4P1SCGST.RDLC',1

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='WSR' AND [FILE_NAME]='GSTWSRA4PSCGST.RDLC')
   INSERT GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1) SELECT 'WSR','GST-LASER/INKJET-A4-PORTRAIT-1ACROSS','GSTWSRA4PSCGST.RDLC',1

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='WSL' AND [REPORT_NAME]='GST-LASER/INKJET-A4-PORTRAIT-1ACROSS-II' AND [FILE_NAME]='GSTWSLA4PSCGSTII.RDLC')
   INSERT GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,[FILE_NAME],[DEFAULT1]) 
   SELECT 'WSL','GST-LASER/INKJET-A4-PORTRAIT-1ACROSS-II','GSTWSLA4PSCGSTII.RDLC',0

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='SLS' AND [FILE_NAME]='GSTSLS82MM.RDLC')
   INSERT INTO GST_REPORT_CONFIG(XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1)
   SELECT 'SLS','GST-THERMAL-PORTRAIT-4.5','GSTSLS82MM.RDLC',0

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='ARC' AND [FILE_NAME]='GSTARCA5P1SCGST.RDLC')
   INSERT GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1) SELECT 'ARC','GST-LASER-A5-PORTRAIT','GSTARCA5P1SCGST.RDLC',0

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='ARC' AND [FILE_NAME]='REPADVREC.PRG')
   INSERT GST_REPORT_CONFIG (XN_TYPE, REPORT_NAME, [FILE_NAME], DEFAULT1)
   SELECT 'ARC','GST-DMP-1ACROSS','REPADVREC.PRG',0

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='ARC' AND [FILE_NAME]='REPADVREC2.PRG')
   INSERT GST_REPORT_CONFIG (XN_TYPE, REPORT_NAME, [FILE_NAME], DEFAULT1)
   SELECT 'ARC','GST-DMP-2ACROSS','REPADVREC2.PRG',0

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='PUR' AND [FILE_NAME]='GSTPURA4PSCGSTII.RDLC')
   INSERT INTO GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1)
   SELECT 'PUR','GST-LASER/INKJET-A4-PORTRAIT-1ACROSS-II','GSTPURA4PSCGSTII.RDLC',0

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='PRT' AND [FILE_NAME]='GSTPRTA4PSCGSTII.RDLC')
   INSERT INTO GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1)
   SELECT 'PRT','GST-LASER/INKJET-A4-PORTRAIT-1ACROSS-II','GSTPRTA4PSCGSTII.RDLC',0  

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='SLS' AND [FILE_NAME]='GSTSLSA5P1SCGSTL.RDLC')
   INSERT INTO GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1)
   SELECT 'SLS','GST-LASER-A5-PORTRAIT-1ACROSS-LANDSCAPE','GSTSLSA5P1SCGSTL.RDLC',0  

UPDATE GST_REPORT_CONFIG SET [FILE_NAME]='GSTSLSA5P1SCGST.RDLC'WHERE XN_TYPE='SLS' AND [FILE_NAME]='GSTSLSA5P1.RDLC'
DELETE FROM GST_REPORT_CONFIG WHERE XN_TYPE='SLS' AND [FILE_NAME]='GSTSLSA5P1SCGST.RDLC'

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='SLS' AND [FILE_NAME]='GSTSLSA5P1SCGST.RDLC')
   INSERT INTO GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1)
   SELECT 'SLS','GST-LASER-A5-PORTRAIT-1ACROSS','GSTSLSA5P1SCGST.RDLC',0  

DELETE FROM GST_REPORT_CONFIG WHERE XN_TYPE='SLS' AND [FILE_NAME]='GSTSLSA5P1SCGSTL.RDLC'

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='SLS' AND [FILE_NAME]='GSTSLSA5P1SCGSTL.RDLC')
   INSERT INTO GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1)
   SELECT 'SLS','GST-LASER-A5-PORTRAIT-1ACROSS-LANDSCAPE','GSTSLSA5P1SCGSTL.RDLC',0  


DECLARE @REP VARCHAR(1000),@UPDATEDREP VARCHAR(100),@FILE_NAME VARCHAR(100)
SELECT TOP 1 @REP=REPORT_NAME,@FILE_NAME=[FILE_NAME] FROM GST_REPORT_CONFIG WHERE XN_TYPE='SLS' AND DEFAULT1=1

IF @REP LIKE 'GST%'
   SET @UPDATEDREP=CASE @REP 
						WHEN 'GST-40COL-DMP-1ACROSS' THEN 'DMP-80 MM'
						WHEN 'GST-DMP-1ACROSS' THEN 'DMP-40 COL-1 ACROSS'
						WHEN 'GST-DMP-2ACROSS' THEN 'DMP-40 COL-2 ACROSS'
						WHEN 'GST-LASER-A4-PORTRAIT-1ACROSS_1-FORMAT' THEN 'LASER-A4-PORTRAIT (FORMAT 1)'
						WHEN 'GST-LASER-A4-PORTRAIT-1ACROSS_2-FORMAT' THEN 'LASER-A4-PORTRAIT (FORMAT 2)'
						WHEN 'GST-LASER-A5-PORTRAIT-1ACROSS' THEN 'LASER-A5-PORTRAIT-1 ACROSS'
						WHEN 'GST-LASER-A5-PORTRAIT-1ACROSS-LANDSCAPE' THEN 'LASER-A5-LANDSCAPE-1 ACROSS'
						WHEN 'GST-LASER-A5-PORTRAIT-2ACROSS' THEN 'LASER-A5-PORTRAIT-2 ACROSS'
						WHEN 'GST-THERMAL-PORTRAIT' THEN 'THERMAL-3 INCH'
						WHEN 'GST-THERMAL-PORTRAIT-2.9' THEN 'THERMAL-2.5 INCH'
						WHEN 'GST-THERMAL-PORTRAIT-4.5' THEN 'THERMAL-3.5 INCH'
						WHEN 'GST-THERMAL-PORTRAIT-WITHCUT' THEN 'THERMAL-PORTRAIT-WITHCUT'
                   END
ELSE
  BEGIN
    SET @UPDATEDREP=@REP 
    SET @REP=CASE @UPDATEDREP
				  WHEN 'DMP-80 MM' THEN 'GST-40COL-DMP-1ACROSS'
				  WHEN 'DMP-40 COL-1 ACROSS' THEN 'GST-DMP-1ACROSS'
				  WHEN 'DMP-40 COL-2 ACROSS' THEN 'GST-DMP-2ACROSS'
				  WHEN 'LASER-A4-PORTRAIT (FORMAT 1)' THEN 'GST-LASER-A4-PORTRAIT-1ACROSS_1-FORMAT'
				  WHEN 'LASER-A4-PORTRAIT (FORMAT 2)' THEN 'GST-LASER-A4-PORTRAIT-1ACROSS_2-FORMAT'
				  WHEN 'LASER-A5-PORTRAIT-1 ACROSS' THEN 'GST-LASER-A5-PORTRAIT-1ACROSS'
				  WHEN 'LASER-A5-LANDSCAPE-1 ACROSS' THEN 'GST-LASER-A5-PORTRAIT-1ACROSS-LANDSCAPE'
				  WHEN 'LASER-A5-PORTRAIT-2 ACROSS' THEN 'GST-LASER-A5-PORTRAIT-2ACROSS'
				  WHEN 'THERMAL-3 INCH' THEN 'GST-THERMAL-PORTRAIT'
				  WHEN 'THERMAL-2.5 INCH' THEN 'GST-THERMAL-PORTRAIT-2.9'
				  WHEN 'THERMAL-3.5 INCH' THEN 'GST-THERMAL-PORTRAIT-4.5'
			      WHEN 'THERMAL-PORTRAIT-WITHCUT' THEN 'GST-THERMAL-PORTRAIT-WITHCUT'
			 END  
  END                   

IF EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='SLS')
   BEGIN
      IF OBJECT_ID('GST_REPORT_CONFIG_SLS','U') IS NOT NULL
         DROP TABLE GST_REPORT_CONFIG_SLS
      
      SELECT * INTO GST_REPORT_CONFIG_SLS FROM GST_REPORT_CONFIG WHERE LTRIM(RTRIM(XN_TYPE))='SLS'  
      DELETE GST_REPORT_CONFIG WHERE LTRIM(RTRIM(XN_TYPE))='SLS'
            
	  INSERT GST_REPORT_CONFIG (XN_TYPE, REPORT_NAME, [FILE_NAME], DEFAULT1)  
	  SELECT 'SLS','GST-LASER-A4-PORTRAIT-1ACROSS_1-FORMAT','GSTSLSA4P1.RDLC',0
	  UNION
	  SELECT 'SLS','GST-LASER-A4-PORTRAIT-1ACROSS_2-FORMAT','GSTSLSA4P1SCGSTII.RDLC',0
      UNION
      SELECT 'SLS','GST-LASER-A5-PORTRAIT-1ACROSS','GSTSLSA5P1SCGST.RDLC',0
	  UNION
	  SELECT 'SLS','GST-LASER-A5-PORTRAIT-2ACROSS','GSTSLSA5P2.RDLC',0
	  UNION
	  SELECT 'SLS','GST-LASER-A5-PORTRAIT-1ACROSS-LANDSCAPE','GSTSLSA5P1SCGSTL.RDLC',0
	  UNION
	  SELECT 'SLS','GST-THERMAL-PORTRAIT','GSTSLS80MM.RDLC',0
	  UNION
	  SELECT 'SLS','GST-DMP-1ACROSS','GSTDMP1ACROSS.PRG',0
	  UNION
	  SELECT 'SLS','GST-DMP-2ACROSS','GSTDMP2ACROSS.PRG',0
	  UNION
	  SELECT 'SLS','GST-40COL-DMP-1ACROSS','GSTDMP40COL.PRG',0
	  UNION
	  SELECT 'SLS','GST-THERMAL-PORTRAIT-WITHCUT','GSTSLS80MMCUT.RDLC',0
	  UNION
	  SELECT 'SLS','GST-THERMAL-PORTRAIT-4.5','GSTSLS82MM.RDLC',0

	  UPDATE GST_REPORT_CONFIG SET DEFAULT1=1 WHERE XN_TYPE='SLS' AND (REPORT_NAME=@REP OR REPORT_NAME=@UPDATEDREP)
	  
	  IF @@ROWCOUNT=0
	     UPDATE GST_REPORT_CONFIG SET DEFAULT1=1 WHERE XN_TYPE='SLS' AND [FILE_NAME]=@FILE_NAME
	     
	  IF @@ROWCOUNT=0
	     BEGIN
	        SELECT TOP 1 @REP=[FILE_NAME] FROM GST_REPORT_CONFIG_SLS WHERE XN_TYPE='SLS' AND DEFAULT1=1
			UPDATE GST_REPORT_CONFIG SET DEFAULT1=1 WHERE XN_TYPE='SLS' AND [FILE_NAME]=@REP      
	     END
   END



DECLARE @REPNAME VARCHAR(100)
SELECT TOP 1 @REPNAME=REPORT_NAME,@FILE_NAME=[FILE_NAME] FROM GST_REPORT_CONFIG WHERE XN_TYPE='PRT' AND DEFAULT1=1

IF EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='PRT')
   BEGIN
      IF OBJECT_ID('GST_REPORT_CONFIG_PRT','U') IS NOT NULL
         DROP TABLE GST_REPORT_CONFIG_PRT 
         
      SELECT * INTO GST_REPORT_CONFIG_PRT FROM GST_REPORT_CONFIG WHERE XN_TYPE='PRT'
      DELETE GST_REPORT_CONFIG WHERE XN_TYPE='PRT'
      
	  INSERT GST_REPORT_CONFIG (XN_TYPE, REPORT_NAME, [FILE_NAME], DEFAULT1)  
	  SELECT 'PRT','GST-LASER/INKJET-A4-PORTRAIT-1ACROSS-II','GSTPRTA4PSCGSTII.RDLC',0
	  UNION
	  SELECT 'PRT','GST-LASER/INKJET-A4-PORTRAIT-1ACROSS','GSTPRTA4P1SCGST.RDLC',0
	  
	  UPDATE GST_REPORT_CONFIG SET DEFAULT1=1 WHERE XN_TYPE='PRT' AND REPORT_NAME=@REPNAME
	  
	  IF @@ROWCOUNT=0
	     UPDATE GST_REPORT_CONFIG SET DEFAULT1=1 WHERE XN_TYPE='PRT' AND [FILE_NAME]=@FILE_NAME
	     
	  IF @@ROWCOUNT=0
	     BEGIN
	        SELECT TOP 1 @REPNAME=[FILE_NAME] FROM GST_REPORT_CONFIG_SLS WHERE XN_TYPE='PRT' AND DEFAULT1=1
			UPDATE GST_REPORT_CONFIG SET DEFAULT1=1 WHERE XN_TYPE='PRT' AND [FILE_NAME]=@REPNAME      
	     END
   END

UPDATE GST_REPORT_CONFIG SET REPORT_NAME='LASER-A5-PORTRAIT' WHERE XN_TYPE='ARC' AND REPORT_NAME='GST-LASER-A5-PORTRAIT'
UPDATE GST_REPORT_CONFIG SET REPORT_NAME='LASER-A4-PORTRAIT' WHERE XN_TYPE='ARC' AND REPORT_NAME='GST-LASER-A4-PORTRAIT-CUSTOMER_RECEIPT'
UPDATE GST_REPORT_CONFIG SET REPORT_NAME='DMP-40 COL-1 ACROSS' WHERE XN_TYPE='ARC' AND REPORT_NAME='GST-DMP-1ACROSS'
UPDATE GST_REPORT_CONFIG SET REPORT_NAME='DMP-40 COL-2 ACROSS' WHERE XN_TYPE='ARC' AND REPORT_NAME='GST-DMP-2ACROSS'
UPDATE GST_REPORT_CONFIG SET REPORT_NAME='THERMAL-80 MM' WHERE XN_TYPE='ARC' AND REPORT_NAME='GST-THERMAL-ARC-PORTRAIT'
UPDATE GST_REPORT_CONFIG SET REPORT_NAME='LASER/INKJET-A4-PORTRAIT-2 LINES PER ITEM' WHERE XN_TYPE='PRT' AND REPORT_NAME='GST-LASER/INKJET-A4-PORTRAIT-1ACROSS-II'
UPDATE GST_REPORT_CONFIG SET REPORT_NAME='LASER/INKJET-A4-PORTRAIT-1 LINE PER ITEM' WHERE XN_TYPE='PRT' AND REPORT_NAME='GST-LASER/INKJET-A4-PORTRAIT-1ACROSS'
UPDATE GST_REPORT_CONFIG SET REPORT_NAME='LASER-A4-PORTRAIT-1 LINE PER ITEM' WHERE XN_TYPE='PUR' AND REPORT_NAME='GST-LASER-A4-PORTRAIT'
UPDATE GST_REPORT_CONFIG SET REPORT_NAME='LASER/INKJET-A4-PORTRAIT-2 LINES PER ITEM' WHERE XN_TYPE='PUR' AND REPORT_NAME='GST-LASER/INKJET-A4-PORTRAIT-1ACROSS-II'
UPDATE GST_REPORT_CONFIG SET REPORT_NAME='LASER/INKJET-A4-PORTRAIT-1 LINE PER ITEM' WHERE XN_TYPE='WSL' AND REPORT_NAME='GST-LASER/INKJET-A4-PORTRAIT-1ACROSS'
UPDATE GST_REPORT_CONFIG SET REPORT_NAME='LASER/INKJET-A4-PORTRAIT-2 LINES PER ITEM' WHERE XN_TYPE='WSL' AND REPORT_NAME='GST-LASER/INKJET-A4-PORTRAIT-1ACROSS-II'
UPDATE GST_REPORT_CONFIG SET REPORT_NAME='LASER/INKJET-A4-PORTRAIT- 1 LINE PER ITEM' WHERE XN_TYPE='WSR' AND REPORT_NAME='GST-LASER/INKJET-A4-PORTRAIT-1ACROSS'
UPDATE GST_REPORT_CONFIG SET REPORT_NAME='DMP-80 MM' WHERE XN_TYPE='SLS' AND REPORT_NAME='GST-40COL-DMP-1ACROSS'
UPDATE GST_REPORT_CONFIG SET REPORT_NAME='DMP-40 COL-1 ACROSS' WHERE XN_TYPE='SLS' AND REPORT_NAME='GST-DMP-1ACROSS'
UPDATE GST_REPORT_CONFIG SET REPORT_NAME='DMP-40 COL-2 ACROSS' WHERE XN_TYPE='SLS' AND REPORT_NAME='GST-DMP-2ACROSS'
UPDATE GST_REPORT_CONFIG SET REPORT_NAME='LASER-A4-PORTRAIT (FORMAT 1)' WHERE XN_TYPE='SLS' AND REPORT_NAME='GST-LASER-A4-PORTRAIT-1ACROSS_1-FORMAT'
UPDATE GST_REPORT_CONFIG SET REPORT_NAME='LASER-A4-PORTRAIT (FORMAT 2)' WHERE XN_TYPE='SLS' AND REPORT_NAME='GST-LASER-A4-PORTRAIT-1ACROSS_2-FORMAT'
UPDATE GST_REPORT_CONFIG SET REPORT_NAME='LASER-A5-PORTRAIT-1 ACROSS' WHERE XN_TYPE='SLS' AND REPORT_NAME='GST-LASER-A5-PORTRAIT-1ACROSS'
UPDATE GST_REPORT_CONFIG SET REPORT_NAME='LASER-A5-LANDSCAPE-1 ACROSS' WHERE XN_TYPE='SLS' AND REPORT_NAME='GST-LASER-A5-PORTRAIT-1ACROSS-LANDSCAPE'
UPDATE GST_REPORT_CONFIG SET REPORT_NAME='LASER-A5-PORTRAIT-2 ACROSS' WHERE XN_TYPE='SLS' AND REPORT_NAME='GST-LASER-A5-PORTRAIT-2ACROSS'
UPDATE GST_REPORT_CONFIG SET REPORT_NAME='THERMAL-3 INCH' WHERE XN_TYPE='SLS' AND REPORT_NAME='GST-THERMAL-PORTRAIT'
UPDATE GST_REPORT_CONFIG SET REPORT_NAME='THERMAL-2.5 INCH' WHERE XN_TYPE='SLS' AND REPORT_NAME='GST-THERMAL-PORTRAIT-2.9'
UPDATE GST_REPORT_CONFIG SET REPORT_NAME='THERMAL-3.5 INCH' WHERE XN_TYPE='SLS' AND REPORT_NAME='GST-THERMAL-PORTRAIT-4.5'
UPDATE GST_REPORT_CONFIG SET REPORT_NAME='THERMAL-PORTRAIT-WITHCUT' WHERE XN_TYPE='SLS' AND REPORT_NAME='GST-THERMAL-PORTRAIT-WITHCUT'

DECLARE @XN VARCHAR(100),@FILE VARCHAR(100),@VAL INT
IF OBJECT_ID('TEMPDB..#GST_REPORT_CONFIG','U') IS NOT NULL
   DROP TABLE #GST_REPORT_CONFIG
SELECT TOP 0 * INTO #GST_REPORT_CONFIG FROM GST_REPORT_CONFIG
DECLARE RCONFIG CURSOR FOR
SELECT DISTINCT XN_TYPE,[FILE_NAME] FROM GST_REPORT_CONFIG(NOLOCK)
OPEN RCONFIG
FETCH NEXT FROM RCONFIG INTO @XN,@FILE
WHILE @@FETCH_STATUS=0
  BEGIN
    SET @VAL=0
    SELECT @VAL=MAX(CAST([DEFAULT1] AS INT)) FROM GST_REPORT_CONFIG (NOLOCK) WHERE XN_TYPE=@XN AND [FILE_NAME]=@FILE
    SELECT TOP 1 @REP=REPORT_NAME FROM GST_REPORT_CONFIG (NOLOCK) WHERE XN_TYPE=@XN AND [FILE_NAME]=@FILE AND [DEFAULT1]=@VAL
    INSERT #GST_REPORT_CONFIG(XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1,LBL,PRINTER_NAME) 
    SELECT @XN,@REP,@FILE,@VAL,NULL,NULL
    FETCH NEXT FROM RCONFIG INTO @XN,@FILE  
  END
CLOSE RCONFIG
DEALLOCATE RCONFIG


--VI_GST
DELETE GST_REPORT_CONFIG

INSERT GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1) 
SELECT XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1 FROM #GST_REPORT_CONFIG

DROP TABLE #GST_REPORT_CONFIG

--UPDATE M SET M.DEFAULT1=B.DEFAULT1
--FROM GST_REPORT_CONFIG M JOIN VI_GST_REPORT_CONFIG B
--ON M.XN_TYPE=B.XN_TYPE AND M.[FILE_NAME]=B.[FILE_NAME]
--AND M.DEFAULT1<>B.DEFAULT1 AND M.DEFAULT1=0
;WITH CTE AS
(SELECT *,DRANK=DENSE_RANK()OVER(PARTITION BY XN_TYPE ORDER BY LAST_UPDATE DESC) FROM VI_GST_REPORT_CONFIG (NOLOCK))

UPDATE M SET M.DEFAULT1=B.DEFAULT1
FROM GST_REPORT_CONFIG M JOIN CTE B
ON M.XN_TYPE=B.XN_TYPE AND M.[FILE_NAME]=B.[FILE_NAME]
AND M.DEFAULT1<>B.DEFAULT1 AND M.DEFAULT1=0
WHERE B.DRANK=1 AND 1=2

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='SLS' AND [FILE_NAME]='GSTSLS76MM.RDLC')
   INSERT GST_REPORT_CONFIG (XN_TYPE, REPORT_NAME, [FILE_NAME], DEFAULT1) 
   SELECT 'SLS','GST-THERMAL-PORTRAIT-2.9','GSTSLS76MM.RDLC',0

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='PRT' AND REPORT_NAME='FINANCIAL DEBIT NOTE')
   INSERT GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1) 
   SELECT 'PRT','FINANCIAL DEBIT NOTE','FD.DOC','0'

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='ARC' AND REPORT_NAME='LASER-A5-OUTSTANDING RECEIPT') 
   INSERT GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1,LBL) 
   SELECT 'ARC','LASER-A5-OUTSTANDING RECEIPT','OSR.RDLC',0,0

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='ARC' AND REPORT_NAME='LASER-A5-ADVANCE RECEIPT')
   INSERT GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1,LBL) 
   SELECT 'ARC','LASER-A5-ADVANCE RECEIPT','ARSCGST.RDLC',0,0

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='ARC' AND REPORT_NAME='LASER-A5-FEES & OTHER CHARGES RECEIPT')
   INSERT GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1,LBL) 
   SELECT 'ARC','LASER-A5-FEES & OTHER CHARGES RECEIPT','FOCRSCGST.RDLC',0,0

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='ARC' AND REPORT_NAME='THERMAL-3INCH-OUTSTANDING RECEIPT')
   INSERT GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1,LBL) 
   SELECT 'ARC','THERMAL-3INCH-OUTSTANDING RECEIPT','OSRT.RDLC',0,0

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='ARC' AND REPORT_NAME='THERMAL-3INCH-ADVANCE RECEIPT')
   INSERT GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1,LBL) 
   SELECT 'ARC','THERMAL-3INCH-ADVANCE RECEIPT','ART.RDLC',0,0
   
IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='ARC' AND REPORT_NAME='THERMAL-3INCH-FEES & OTHER CHARGES RECEIPT')
   INSERT GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1,LBL) 
   SELECT 'ARC','THERMAL-3INCH-FEES & OTHER CHARGES RECEIPT','FOCRT.RDLC',0,0   
   
IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='ARC' AND REPORT_NAME='LASER-A5-CREDITISSUE RECEIPT') 
   INSERT GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1,LBL) 
   SELECT 'ARC','LASER-A5-CREDITISSUE RECEIPT','CIRSCGST.RDLC',0,0

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='ARC' AND REPORT_NAME='THERMAL-3INCH-CREDITISSUE RECEIPT') 
   INSERT GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1,LBL) 
   SELECT 'ARC','THERMAL-3INCH-CREDITISSUE RECEIPT','CIRT.RDLC',0,0

DECLARE @REPORT_TYPE VARCHAR(10)
SELECT TOP 1 @REPORT_TYPE=CASE WHEN REPORT_NAME LIKE 'LASER-A5%' THEN 'A5'
                               WHEN REPORT_NAME LIKE 'LASER-A4%' THEN 'A4'
                               ELSE 'DEFAULT' END
FROM GST_REPORT_CONFIG WHERE XN_TYPE='SLS' AND DEFAULT1=1 

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='SLS' AND REPORT_NAME='CASH MEMO DOC') 
   INSERT GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1,LBL) SELECT 'SLS','CASH MEMO DOC','CASHMEMODOC.DOCX',0,0


--06 FEB 2018
IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='PRT' AND [REPORT_NAME]='MULTI DEBIT NOTE' AND [FILE_NAME]='GSTPRTA4P1SCGSTNRVN.RDLC')
   INSERT GST_REPORT_CONFIG (XN_TYPE,REPORT_NAME,[FILE_NAME],[DEFAULT1]) 
   SELECT 'PRT','MULTI DEBIT NOTE','GSTPRTA4P1SCGSTNRVN.RDLC',0

IF(SELECT COUNT(*) FROM GST_REPORT_CONFIG(NOLOCK) WHERE XN_TYPE='ARC' AND [FILE_NAME]='ARSCGST.RDLC')>1
   BEGIN
      ;WITH CTE AS (SELECT RNO=ROW_NUMBER()OVER(PARTITION BY [FILE_NAME] ORDER BY [FILE_NAME]),* FROM GST_REPORT_CONFIG(NOLOCK) WHERE XN_TYPE='ARC' AND [FILE_NAME]='ARSCGST.RDLC')
      DELETE CTE WHERE RNO>1
   END

UPDATE GST_REPORT_CONFIG SET [REPORT_NAME]=[REPORT_NAME]+'(PORTRAIT)'WHERE XN_TYPE='ARC' AND [REPORT_NAME] IN ('LASER-A5-ADVANCE RECEIPT') AND [FILE_NAME]='ARSCGST.RDLC'

IF(SELECT COUNT(*) FROM GST_REPORT_CONFIG(NOLOCK) WHERE XN_TYPE='ARC' AND [FILE_NAME]='CIRSCGST.RDLC')>1
   BEGIN
      ;WITH CTE AS (SELECT RNO=ROW_NUMBER()OVER(PARTITION BY [FILE_NAME] ORDER BY [FILE_NAME]),* FROM GST_REPORT_CONFIG(NOLOCK) WHERE XN_TYPE='ARC' AND [FILE_NAME]='CIRSCGST.RDLC')
      DELETE CTE WHERE RNO>1
   END

UPDATE GST_REPORT_CONFIG SET [REPORT_NAME]=[REPORT_NAME]+'(PORTRAIT)'WHERE XN_TYPE='ARC' AND [REPORT_NAME] IN ('LASER-A5-CREDITISSUE RECEIPT') AND [FILE_NAME]='CIRSCGST.RDLC'

IF(SELECT COUNT(*) FROM GST_REPORT_CONFIG(NOLOCK) WHERE XN_TYPE='ARC' AND [FILE_NAME]='FOCRSCGST.RDLC')>1
   BEGIN
      ;WITH CTE AS (SELECT RNO=ROW_NUMBER()OVER(PARTITION BY [FILE_NAME] ORDER BY [FILE_NAME]),* FROM GST_REPORT_CONFIG(NOLOCK) WHERE XN_TYPE='ARC' AND [FILE_NAME]='FOCRSCGST.RDLC')
      DELETE CTE WHERE RNO>1
   END

UPDATE GST_REPORT_CONFIG SET [REPORT_NAME]=[REPORT_NAME]+'(PORTRAIT)'WHERE XN_TYPE='ARC' AND [REPORT_NAME] IN ('LASER-A5-FEES & OTHER CHARGES RECEIPT') AND [FILE_NAME]='FOCRSCGST.RDLC'

IF(SELECT COUNT(*) FROM GST_REPORT_CONFIG(NOLOCK) WHERE XN_TYPE='ARC' AND [FILE_NAME]='OSR.RDLC')>1
   BEGIN
      ;WITH CTE AS (SELECT RNO=ROW_NUMBER()OVER(PARTITION BY [FILE_NAME] ORDER BY [FILE_NAME]),* FROM GST_REPORT_CONFIG(NOLOCK) WHERE XN_TYPE='ARC' AND [FILE_NAME]='OSR.RDLC')
      DELETE CTE WHERE RNO>1
   END

UPDATE GST_REPORT_CONFIG SET [REPORT_NAME]=[REPORT_NAME]+'(PORTRAIT)'WHERE XN_TYPE='ARC' AND [REPORT_NAME] IN ('LASER-A5-OUTSTANDING RECEIPT')AND [FILE_NAME]='OSR.RDLC'

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='ARC' AND [REPORT_NAME]='LASER-A5-ADVANCE RECEIPT(LANDSCAPE)' AND [FILE_NAME]='ARSCGSTL.RDLC')
   INSERT GST_REPORT_CONFIG(XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1,LBL,PRINTER_NAME)
   SELECT 'ARC','LASER-A5-ADVANCE RECEIPT(LANDSCAPE)','ARSCGSTL.RDLC',0,NULL,NULL

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='ARC' AND [REPORT_NAME]='LASER-A5-CREDITISSUE RECEIPT(LANDSCAPE)' AND [FILE_NAME]='CIRSCGSTL.RDLC')
   INSERT GST_REPORT_CONFIG(XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1,LBL,PRINTER_NAME)
   SELECT 'ARC','LASER-A5-CREDITISSUE RECEIPT(LANDSCAPE)','CIRSCGSTL.RDLC',0,NULL,NULL  

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='ARC' AND [REPORT_NAME]='LASER-A5-FEES & OTHER CHARGES RECEIPT(LANDSCAPE)' AND [FILE_NAME]='FOCRSCGSTL.RDLC')
   INSERT GST_REPORT_CONFIG(XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1,LBL,PRINTER_NAME)
   SELECT 'ARC','LASER-A5-FEES & OTHER CHARGES RECEIPT(LANDSCAPE)','FOCRSCGSTL.RDLC',0,NULL,NULL

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='ARC' AND [REPORT_NAME]='LASER-A5-OUTSTANDING RECEIPT(LANDSCAPE)' AND [FILE_NAME]='OSRL.RDLC')
   INSERT GST_REPORT_CONFIG(XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1,LBL,PRINTER_NAME)
   SELECT 'ARC','LASER-A5-OUTSTANDING RECEIPT(LANDSCAPE)','OSRL.RDLC',0,NULL,NULL

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='PRT' AND [FILE_NAME]='GSTPRTA5P1SCGST.RDLC')
   INSERT GST_REPORT_CONFIG(XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1,LBL,PRINTER_NAME)
   SELECT TOP 1 'PRT','LASER-A5-PORTRAIT-1 ACROSS','GSTPRTA5P1SCGST.RDLC',0,NULL,NULL


IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='PRT' AND [FILE_NAME]='GSTPRT80MM.RDLC')
   INSERT GST_REPORT_CONFIG(XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1,LBL,PRINTER_NAME)
   SELECT 'PRT','THERMAL-3 INCH','GSTPRT80MM.RDLC',0,NULL,NULL;

IF NOT EXISTS ( SELECT * FROM GST_REPORT_CONFIG 
				WHERE XN_TYPE='WSL' AND REPORT_NAME='LASER/INKJET-A4-PORTRAIT-1 LINE PER ITEM (CROSSTAB)')
INSERT GST_REPORT_CONFIG(XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1,LBL,PRINTER_NAME)
SELECT 'WSL','LASER/INKJET-A4-PORTRAIT-1 LINE PER ITEM (CROSSTAB)','GSTWSLA4P1SCGSTCROSS.RDLC',0,NULL,NULL;


IF NOT EXISTS ( SELECT * FROM GST_REPORT_CONFIG 
				WHERE XN_TYPE='PRT' AND REPORT_NAME='LASER/INKJET-A4-PORTRAIT (MULTIPLE GROUP)')
INSERT GST_REPORT_CONFIG(XN_TYPE,REPORT_NAME,[FILE_NAME],DEFAULT1,LBL,PRINTER_NAME)
SELECT 'PRT','LASER/INKJET-A4-PORTRAIT (MULTIPLE GROUP)','GSTPRTA4P1SCGSTMG.RDLC',0,NULL,NULL;

IF NOT EXISTS(SELECT * FROM GST_REPORT_CONFIG WHERE XN_TYPE='POSCASHIER')
BEGIN
	INSERT GST_REPORT_CONFIG (XN_TYPE, REPORT_NAME, FILE_NAME, DEFAULT1, LBL, PRINTER_NAME )  
	SELECT 'POSCASHIER' XN_TYPE, REPORT_NAME, FILE_NAME, 0 DEFAULT1, LBL, PRINTER_NAME 
	FROM GST_REPORT_CONFIG WHERE XN_TYPE='SLS'
END;

--14 FEB 2018:
UPDATE A SET A.DEFAULT1=ISNULL(B.DEFAULT1,0)
FROM GST_REPORT_CONFIG A JOIN GST_REPORT_CONFIG_RESOLVE B ON A.XN_TYPE=B.XN_TYPE AND A.[FILE_NAME]=B.[FILE_NAME]
--WHERE A.DEFAULT1=0 AND A.DEFAULT1<>ISNULL(B.DEFAULT1,0)

IF OBJECT_ID('GST_REPORT_CONFIG_RESOLVE','U') IS NOT NULL
   BEGIN
	 INSERT GST_REPORT_CONFIG (XN_TYPE, REPORT_NAME, [FILE_NAME], DEFAULT1, LBL, PRINTER_NAME)  
	 SELECT A.XN_TYPE, A.REPORT_NAME, A.[FILE_NAME], A.DEFAULT1, A.LBL, A.PRINTER_NAME 
	 FROM GST_REPORT_CONFIG_RESOLVE A 
	 LEFT JOIN GST_REPORT_CONFIG B ON A.XN_TYPE=B.XN_TYPE AND A.[FILE_NAME]=B.[FILE_NAME] AND ISNULL(A.DEFAULT1,0)=ISNULL(B.DEFAULT1,0)
	 WHERE B.[FILE_NAME]=NULL
	 DROP TABLE GST_REPORT_CONFIG_RESOLVE
   END
SET NOCOUNT OFF
