CREATE procEDURE SP_WSLINV_5--(LocId 3 digit change only increased the parameter width by Sanjay:04-11-2024)
	@CMEMOID	VARCHAR(40) = '',
	@CWHERE1	VARCHAR(500) = '',
	@NNAVMODE	NUMERIC(1,0) = 0,
	@CWHERE2	NVARCHAR(MAX)='',
	@DMEMODT DATETIME='',
	@CLOCID		VARCHAR(4)=''
----WITH ENCRYPTION
AS
BEGIN
	DECLARE @CHEADCODESTR VARCHAR(1000)

	SELECT @CHEADCODESTR = DBO.FN_ACT_TRAVTREE('0000000018')
	SELECT LMV.AC_CODE, LMV.AC_NAME, LMV.ADDRESS0,LMV.ADDRESS1,LMV.ADDRESS2 AREA_NAME , LMV.CITY, LMV.[STATE],LMV.PINCODE ,
	ISNULL(LMV.DISCOUNT_PERCENTAGE,0) AS DISCOUNT_PERCENTAGE,LMV.INV_RATE_TYPE,LMV.FORM_ID, 
	ISNULL(LMV.DEFAULT_RATE_TYPE,1) AS DEFAULT_RATE_TYPE,LMV.BROKER_AC_CODE,LMV.RESTRICT_PUR_ENTRY,
	ISNULL(LMV.WSL_RATE_CALC_METHOD,1)AS WSL_RATE_CALC_METHOD
	,ISNULL(B.MBO_COUNTER,0) AS MBO_COUNTER
	,ISNULL(B.BIN_ID,'') AS BIN_ID
	,ISNULL(B.BIN_NAME,'') AS BIN_NAME
	,ISNULL(B.BIN_ALIAS,'') AS BIN_ALIAS,CREDIT_DAYS,
	ISNULL(LMV.PURCHASE_AGAINST_TERMS,0) AS [PURCHASE_AGAINST_TERMS]
	FROM LMV01106  LMV (NOLOCK)
	LEFT JOIN BIN B (NOLOCK) ON LMV.AC_CODE=B.MBO_LEDGER_AC_CODE
	WHERE (CHARINDEX(LMV.HEAD_CODE,@CHEADCODESTR)>0
	OR LMV.ALLOW_CREDITOR_DEBTOR=1) AND LMV.AC_CODE <>'0000000000' AND ISNULL(LMV.AC_NAME,'')<>''
	AND LMV.INACTIVE=0
	ORDER BY LMV.AC_NAME 
	
END