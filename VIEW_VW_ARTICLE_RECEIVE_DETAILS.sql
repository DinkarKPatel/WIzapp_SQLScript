CREATE VIEW VW_ARTICLE_RECEIVE_DETAILS

AS
SELECT DISTINCT
	 IM.MEMO_ID AS ISSUE_ID
	,IM.MEMO_NO AS ISSUE_MEMO_NO
	,IM.MEMO_DT AS ISSUE_DT
	,RM.MEMO_DT AS RECEIVE_DATE
	,RM.DEPARTMENT_ID 
	,PM.MEMO_NO AS WORKORDERNO
	,PM.REF_NO AS WOREFNO
	,DI.DEPARTMENT_NAME AS SOURCE_DEPARTMENT
	,DR.DEPARTMENT_NAME AS TARGET_DEPARTMENT
	,AT.ARTICLE_NO AS COMPONENTS
	,ART.ARTICLE_NO 
	,ART.ARTICLE_NAME
	,ART.ARTICLE_DESC
	,PARA1.PARA1_NAME AS COLOR
	,PARA2.PARA2_NAME AS SIZE
	,ID.QUANTITY AS QUANTITY
	,UOM.UOM_NAME
	,PJ.JOB_CODE
	,PJ.START_DT 
	,PJ.TARGET_DT
	,PJ.PLAN_DT
	,PJ.ACTUAL_DT
	,AT1.ARTICLE_NO AS ARTICLE_SET_CODE
	,'RECEIVED' AS STATUS
FROM PRD_ISSUE_MATERIAL_MST IM
JOIN PRD_ISSUE_MATERIAL_DET ID ON IM.MEMO_ID=ID.MEMO_ID 
JOIN PRD_DEPARTMENT_MST DI ON IM.SOURCE_DEPARTMENT_ID=DI.DEPARTMENT_ID
JOIN PRD_DEPARTMENT_MST DR ON IM.TARGET_DEPARTMENT_ID=DR.DEPARTMENT_ID
JOIN ARTICLE AT ON ID.REF_COMPONENT_ARTICLE_CODE=AT.ARTICLE_CODE
JOIN ARTICLE ART ON ID.ARTICLE_CODE=ART.ARTICLE_CODE
JOIN UOM ON ART.UOM_CODE=UOM.UOM_CODE
JOIN PARA1 ON ID.PARA1_CODE=PARA1.PARA1_CODE
JOIN PARA2 ON ID.PARA2_CODE=PARA2.PARA2_CODE

JOIN PRD_WO_MST PM ON ID.REF_PRD_WORKORDER_MEMOID =PM.MEMO_ID
JOIN PRD_WO_DET PD ON ID.REF_COMPONENT_ARTICLE_CODE=PD.ARTICLE_CODE

JOIN ARTICLE AT1 ON PM.ARTICLE_SET_CODE=AT1.ARTICLE_CODE

JOIN PRD_MATERIAL_RECEIPT_MST RM ON IM.MEMO_ID=RM.REF_PRD_MATERIAL_ISSUE_MEMOID

JOIN PRD_WO_ART_JOBS PJ ON PD.ROW_ID=PJ.REF_ROW_ID AND PJ.JOB_CODE = ID.JOB_CODE
