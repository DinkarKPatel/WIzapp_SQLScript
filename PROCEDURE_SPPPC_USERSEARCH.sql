CREATE PROCEDURE SPPPC_USERSEARCH
(
 @CUSER_CODE VARCHAR(10)='',
 @NINACTIVE INT=2
)
AS
BEGIN
     
     SELECT A.USER_CODE,A.USERNAME,A.USER_ALIAS ,
     CASE WHEN A.INACTIVE=1 THEN 'YES' ELSE 'NO' END  AS INACTIVE,
     ROLE_NAME
     FROM USERS A
     JOIN USER_ROLE_MST B ON A.ROLE_ID=B.ROLE_ID
     WHERE (@CUSER_CODE='' OR USER_CODE=@CUSER_CODE)
     AND (@NINACTIVE=2 OR INACTIVE=@NINACTIVE)

END
