CREATE PROCEDURE SP_RETAILSALE_1--(LocId 3 digit change by Sanjay:06-11-2024)
(  
	 @CQUERYID			NUMERIC(2),  
	 @CWHERE			VARCHAR(MAX)='',  
	 @CFINYEAR			VARCHAR(5)='',  
	 @CDEPTID			VARCHAR(4)='',  
	 @NNAVMODE			NUMERIC(2)=1,  
	 @CWIZAPPUSERCODE	VARCHAR(10)='',  
	 @CREFMEMOID		VARCHAR(40)='',  
	 @CREFMEMODT		DATETIME='',  
	 @BINCLUDEESTIMATE	BIT=1,  
	 @CFROMDT			DATETIME='',  
	 @CTODT				VARCHAR(50)='',
	 @bCardDiscount		BIT=0,
	 @cCustCode			VARCHAR(15)=''
) 
AS  
BEGIN  
     IF @CTODT=''
     SET @CTODT=CONVERT(VARCHAR(10),GETDATE (),121)
     
DECLARE @CCMD NVARCHAR(MAX),@CFLATDISC VARCHAR(10)  
SET @CCMD=''  
    
LBLCMMLU:  
  EXECUTE SP_NAVIGATE 'CMM01106',@NNAVMODE,@CREFMEMOID,@CFINYEAR,'CM_NO','CM_DT','CM_ID',@CWHERE,@BINCLUDEESTIMATE  
  -- @NMODE :  1 - TOP RECORD  
  --    2 - NEXT RECORD (@CREFMEMOID AND @CREFMEMODT IS MANDATORY)  
  --    3 - PREVIOUS RECORD (@CREFMEMOID AND @CREFMEMODT IS MANDATORY)  
  --    4 - LAST RECORD  
    
 
END  
