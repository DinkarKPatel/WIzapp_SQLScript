CREATE PROCEDURE SP_SEND_MIRROR_BIN_MST_DATA_NEW
(
 @CBIN_ID VARCHAR(7),
 @BACKNOWLEDGE BIT=0,
 @CERRMSG VARCHAR(1000) OUTPUT
)
----WITH ENCRYPTION
AS
BEGIN
     DECLARE @CTEMPDBNAME VARCHAR(100),@CSTEP VARCHAR(10),@CTABLENAME VARCHAR(100),
             @CTEMPTABLE VARCHAR(100),@DTSQL NVARCHAR(MAX),@CTEMPDETAILTABLE VARCHAR(100),
             @CTEMPAREATABLE VARCHAR(100),@CTEMPCITYTABLE VARCHAR(100),@CTEMPSTATETABLE VARCHAR(100),
             @CTEMPREGIONMTABLE VARCHAR(100),
             @CMEMOID VARCHAR(100),@TEMP_TABLENAME VARCHAR(500)
             
     DECLARE @TXNSSENDINFO TABLE (ORG_TABLENAME VARCHAR(100),TMP_TABLENAME VARCHAR(100),XN_ID VARCHAR(100)) 
     SET @CERRMSG= ''
     BEGIN TRY
     SET @CTEMPDBNAME=''
	
	
	
    SET @CSTEP=11
    IF ISNULL(@CBIN_ID,'') <> ''
    BEGIN
     IF EXISTS(SELECT * FROM DBO.BIN WITH(NOLOCK) 
              WHERE BIN_ID  = @CBIN_ID )
       SET @CMEMOID= @CBIN_ID
     ELSE
     BEGIN
      SET @CERRMSG ='BIN NOT FOUND';
      GOTO END_PROC;
     END
    END
        
    IF ISNULL(@CMEMOID,'') = ''
    BEGIN
     SET @CERRMSG ='BIN NOT FOUND';
     GOTO END_PROC;
    END
    --SELECT @CMEMOID
	
    SET @CSTEP=12
   

	SELECT A.*,'BIN_MST_BIN_UPLOAD' AS TARGET_TABLENAME FROM BIN A (NOLOCK) WHERE BIN_ID=@CMEMOID


    

	 END TRY
BEGIN CATCH
	SET @CERRMSG='P: SP_SEND_MIRROR_BIN_MST_DATA_NEW, STEP:'+@CSTEP+', MESSAGE:'+ERROR_MESSAGE()
	GOTO END_PROC
END CATCH 	
	
END_PROC:

     
    
				
END
--- 'END OF PROCEDURE SP_SEND_MIRROR_BIN_MST_DATA_NEW'
