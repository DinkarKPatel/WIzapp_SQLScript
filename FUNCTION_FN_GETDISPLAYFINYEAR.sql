CREATE FUNCTION FN_GETDISPLAYFINYEAR
(
	@CFINYEAR VARCHAR(10)
)
RETURNS VARCHAR(7)
AS
BEGIN

	DECLARE @CSENTURYID VARCHAR(10),
			@CYEARID VARCHAR(10),
			@CPREYEARID VARCHAR(10),
			@NYEARNO INT,
			@CDISPLAY_FINYEAR VARCHAR(7)
			
	SET @CSENTURYID = SUBSTRING(@CFINYEAR, 3,1)
	SET @CYEARID = RIGHT(@CFINYEAR,2) 
	SET @CPREYEARID=@CYEARID-1
	SET @NYEARNO = (CONVERT(INT,@CSENTURYID) + 19) * 100 + CONVERT(INT,@CPREYEARID)
	
	SET @CDISPLAY_FINYEAR=CONVERT(VARCHAR(4),@NYEARNO)+'-'+@CYEARID
	
	RETURN @CDISPLAY_FINYEAR
END
--******************************* END OF FUNCTION FN_GETDISPLAYFINYEAR
