CREATE TRIGGER TRG_USERS_CHKPWD
ON USERS
--WITH ENCRYPTION
FOR INSERT, UPDATE 
AS
BEGIN
	IF EXISTS ( SELECT a.USER_CODE FROM INSERTED a left join deleted b on  a.user_code=b.user_code
	 WHERE a.PASSWD='' and (ISNULL(b.passwd,'')<>'' OR b.user_code IS NULL) )
	BEGIN
		RAISERROR ('TRG_USERS_CHKPWD : BLANK PASSWORD NOT ALLOWED FOR USERS...' , 16, 1)
		ROLLBACK TRANSACTION
	END
END