CREATE VIEW VW_ACT_VCHENTRY_QBF       
--WITH ENCRYPTION
AS       
SELECT A.VM_ID AS MEMO_ID,       
A.VOUCHER_NO AS MST_MEMO_NO,           
A.VOUCHER_DT AS MST_XN_DT,       
A.DRTOTAL AS CAL_DRTOTAL,       
A.CRTOTAL AS CAL_CRTOTAL,       
A.BILL_NO,       
A.BILL_TYPE,       
A.REF_NO,       
A.DEPT_ID,       
A.BILL_ID,       
A.FIN_YEAR,        
U.USERNAME,       
B.NARRATION,       
B.CREDIT_AMOUNT,       
B.DEBIT_AMOUNT,       
B.X_TYPE,       
B.RECON_DT,       
C.AC_NAME,       
C.AREA_NAME,       
C.CITY,       
C.STATE,       
D.VOUCHER_TYPE,  
A.LAST_UPDATE  AS POST_DT     
--ISNULL(E.REF_NO,'') AS VDN_BILL_NO,       
--ISNULL(E.INV_AMT,0) AS VDN_AMOUNT,       
--ISNULL(E.NX_TYPE,'') AS VDN_XN_TYPE,       
--ISNULL(F.AMOUNT,0) AS VDA_AMOUNT,       
--ISNULL(F.X_TYPE,'') AS VDA_XN_TYPE       
FROM VM01106 A       
JOIN VD01106 B ON B.VM_ID=A.VM_ID       
JOIN LMV01106 C ON C.AC_CODE=B.AC_CODE       
JOIN VCHTYPE D ON D.VOUCHER_CODE=A.VOUCHER_CODE       
JOIN USERS U ON U.USER_CODE=A.USER_CODE       
--LEFT OUTER JOIN VDN01106 E ON E.VD_ID=B.VD_ID       
--LEFT OUTER JOIN VDA01106 F ON F.VD_ID=B.VD_ID     
WHERE(CANCELLED = 0)
