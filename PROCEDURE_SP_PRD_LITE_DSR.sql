CREATE PROCEDURE SP_PRD_LITE_DSR      
(      
 @NQUERYID NUMERIC(3,0),      
 @CDEPT_ID VARCHAR(2) = '',      
 @DTFROM DATETIME='',      
 @DTTO DATETIME='',      
 @CUSERCODE VARCHAR(12) = '',      --CHANGE
 @NMODE NUMERIC(1,0) = 1,      
 @PRINTDETAILS BIT = 0,  
 @CWHERE VARCHAR(100) ='',
 @BESTIMATEENABLED BIT = 1,
 @CBINID	VARCHAR(10)='',
 @NSUMMARYTYPE INT=1
)      
--WITH ENCRYPTION
AS      
BEGIN      

	DECLARE @CCUTOFFDATE VARCHAR(10)
	SELECT TOP 1 @CCUTOFFDATE=VALUE FROM CONFIG WHERE CONFIG_OPTION='GIT_CUT_OFF_DATE'
	
	SET @CCUTOFFDATE=ISNULL(@CCUTOFFDATE,'')

	      
IF @NQUERYID= 22
	GOTO LBLGETREPORTS_NEW
ELSE      
	GOTO LAST  


LBLGETREPORTS_NEW:

	  	SELECT G_REPORT_FILE,D_REPORT_FILE,REPORT_GROUP,CUSTOM_REPORT,NOOFCOPIES,LPT_NO,
	  	MODULE_NAME,REPORT_NO,REPORT_NAME,CONVERT(BIT,0) AS [CUSTOM],TS,REPORT_GRP_NO
	  	FROM PRD_REPORTS 
	  	WHERE MODULE_NAME = 'PRD_FIXREPORTS_BETA' AND ISNULL(REPORT_HIDE,0)=0
	  	UNION ALL 
	  	SELECT G_REPORT_FILE,D_REPORT_FILE,REPORT_GROUP,CUSTOM_REPORT,NOOFCOPIES,LPT_NO,
	  	MODULE_NAME,REPORT_NO,REPORT_NAME,CONVERT(BIT,1) AS [CUSTOM],TS,0 AS REPORT_GRP_NO
	  	FROM REPORTS_CUSTOM 
	  	ORDER BY REPORT_GRP_NO,REPORT_NO  
	  	    
	GOTO LAST      
LAST:      
END
