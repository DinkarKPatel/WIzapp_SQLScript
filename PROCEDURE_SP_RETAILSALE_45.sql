CREATE PROCEDURE SP_RETAILSALE_45--(LocId 3 digit change  by Sanjay:01-11-2024)
(  
	@CWHERE			VARCHAR(MAX)='',  
	@CDEPTID			VARCHAR(4)='',  
	@CWIZAPPUSERCODE	VARCHAR(10)='',  
	@CBIN_ID		VARCHAR(40)=''
) 
AS  
BEGIN

	SELECT CAST(0 AS BIT) AS CHK, a.PRODUCT_CODE,a.BIN_ID,b.location_Code AS DEPT_ID,(ISNULL(C.QUANTITY_IN_STOCK,0)+a.quantity) AS QUANTITY_IN_STOCK,BIN_NAME,a.MRP
	,(ISNULL(C.QUANTITY_IN_STOCK,0)+a.quantity) AS FIXED_QUANTITY_IN_STOCK
	FROM CMD01106 a (NOLOCK)
	JOIN CMM01106 b (NOLOCK) ON b.CM_ID=a.CM_ID
	JOIN BIN (NOLOCK) ON BIN.BIN_ID=a.BIN_ID
	LEFT OUTER JOIN PMT01106 C (NOLOCK )  ON C.product_code=a.PRODUCT_CODE AND b.location_Code=c.DEPT_ID AND a.BIN_ID=c.BIN_ID
	WHERE a.CM_ID=@CWHERE
	
END