CREATE PROCEDURE SP3SLEDGER --'0000000025'  
(
    @HEADCODE VARCHAR(10)=''  
)    
--WITH ENCRYPTION
AS   
BEGIN  
	DECLARE @CHEADCODESTR VARCHAR(1000)  
	SELECT @CHEADCODESTR = DBO.FN_ACT_TRAVTREE(@HEADCODE)  
	  
	  
	SELECT A.AC_CODE,A.AC_NAME,A.HEAD_CODE  
	FROM LM01106  A (NOLOCK)  
	LEFT OUTER JOIN LMP01106 A1 (NOLOCK) ON A1.AC_CODE=A.AC_CODE  
	WHERE (@HEADCODE ='' OR CHARINDEX(HEAD_CODE,@CHEADCODESTR)>0)   
	AND A.AC_CODE <>'0000000000'
	ORDER BY A.AC_NAME  
END  
--END OF PROCEDURE - SP3SLEDGER
