create PROCEDURE POSTACT
(
	@CXNTYPE CHAR(10),
	@DFROMDT DATETIME,
	@DTODT DATETIME,
	@CACCODE VARCHAR(10) = '',
	@CLOCATIONID CHAR(4)='',
	@CDONOTCHKPENDING CHAR(1)=''
)
AS 
BEGIN


	DECLARE @CENABLENEWACCOUNTS VARCHAR(2),@CGSTCUTOFFDATE VARCHAR(20),@DGSTCUTOFFDATE DATETIME
	
	SELECT TOP 1 @CENABLENEWACCOUNTS=VALUE FROM CONFIG WHERE CONFIG_OPTION='NEW_ACCOUNT_SYSTEM'
	
	SELECT @DGSTCUTOFFDATE='',@CGSTCUTOFFDATE=''
	SELECT @CGSTCUTOFFDATE=VALUE FROM CONFIG WHERE CONFIG_OPTION ='GST_CUT_OFF_DATE'
    
    IF ISNULL(@CGSTCUTOFFDATE,'')<>''
        SELECT @DGSTCUTOFFDATE=CAST(@CGSTCUTOFFDATE AS DATETIME)
        
	---- THIS PROCEDURE IS NOW MEANT FOR POSTING OF NON-GST PERIOD ENTRIES ONLY 
	---- FOR GST PERIOD ENTRIES POSTING, NEW PROCEDURE POSTACT_GST IS BEING CREATED
	IF @DTODT>'2017-06-30'
		SET @DTODT='2017-06-30'
		
	IF @CXNTYPE='PUR'
	BEGIN
		EXEC POSTACT_PUR @DTODT,@CLOCATIONID,@CACCODE,@DGSTCUTOFFDATE
		RETURN
	END	
	ELSE IF @CXNTYPE='PRT'
	BEGIN
		EXEC POSTACT_PRT @DTODT,@CLOCATIONID,@CACCODE,@DGSTCUTOFFDATE
		RETURN
	END
	ELSE IF @CXNTYPE='WSL'
	BEGIN
		EXEC POSTACT_WSL @DTODT,@CLOCATIONID,@CACCODE,@DGSTCUTOFFDATE
		RETURN
	END
	ELSE IF @CXNTYPE='WSR'
	BEGIN
		EXEC POSTACT_WSR @DTODT,@CLOCATIONID,@CACCODE,@DGSTCUTOFFDATE
		RETURN
	END 
	ELSE IF @CXNTYPE='ARC'
	BEGIN
		EXEC POSTACT_ARC @DTODT,@CLOCATIONID,@DGSTCUTOFFDATE
		RETURN
	END
	ELSE IF @CXNTYPE='SLS'
	BEGIN
		EXEC POSTACT_SLS @DTODT,@CLOCATIONID,0,@DGSTCUTOFFDATE
		RETURN
	END
	ELSE IF @CXNTYPE='PTC'
	BEGIN
		EXEC POSTACT_PTC @DTODT,@CLOCATIONID
		RETURN
	END
		
	ELSE IF @CXNTYPE='JWR'
	BEGIN
		EXEC POSTACT_JWR @DTODT,@CLOCATIONID
		RETURN
	END
	ELSE IF @CXNTYPE='BTF'
	BEGIN
		EXEC POSTACT_BTF @DTODT,@CLOCATIONID
		RETURN
	END
	ELSE IF @CXNTYPE='TTL'
	BEGIN
		EXEC POSTACT_TTL @DTODT,@CLOCATIONID
		RETURN
	END
	ELSE IF @CXNTYPE='CHI'
	BEGIN
		EXEC POSTACT_XFR @DTODT,@CLOCATIONID,@DGSTCUTOFFDATE
		RETURN
	END
	ELSE IF @CXNTYPE='PTF'
	BEGIN
		EXEC POSTACT_PTF @DTODT,@CLOCATIONID
		RETURN
	END
	ELSE IF @CXNTYPE='RCM'
	BEGIN
		EXEC POSTACT_RCM @DTODT,@CLOCATIONID
		RETURN
	END
	
END
--------------- END OF PROCEDURE POSTACT
