
IF NOT EXISTS (SELECT TOP 1 'U'  FROM SYSINDEXES WHERE name ='UNQ_BIN_NAME_BIN')
BEGIN

	DECLARE @CCMD NVARCHAR(MAX)
	select @CCMD=' ALTER TABLE '+TABLES.NAME+' DROP CONSTRAINT '+DEFAULT_CONSTRAINTS.name 
	FROM SYS.ALL_COLUMNS
	INNER JOIN SYS.TABLES ON ALL_COLUMNS.OBJECT_ID = TABLES.OBJECT_ID
	INNER JOIN SYS.SCHEMAS ON TABLES.SCHEMA_ID = SCHEMAS.SCHEMA_ID
	INNER JOIN SYS.DEFAULT_CONSTRAINTS ON ALL_COLUMNS.DEFAULT_OBJECT_ID = DEFAULT_CONSTRAINTS.OBJECT_ID 
	WHERE ALL_COLUMNS.NAME='BIN_NAME'
	AND TABLES.NAME='BIN'

	IF ISNULL(@CCMD,'')<>''
	EXEC SP_EXECUTESQL @CCMD


	ALTER TABLE BIN ALTER COLUMN BIN_NAME VARCHAR(500) NOT NULL 

	ALTER TABLE BIN ADD CONSTRAINT UNQ_BIN_NAME_BIN UNIQUE (BIN_NAME)

END
