CREATE PROCEDURE SP_BUYERSORDER_WSL_11
@CMEMOID VARCHAR(40),  
@CWHERE VARCHAR(500),  
@CFINYEAR VARCHAR(10),  
@NNAVMODE NUMERIC(2,0),
@CARTICLECODE CHAR(9)='',  
@CPARA2CODE CHAR(7)='',
@DTWHERE DATETIME ='',
@cLocId VARCHAR(5)=''
--WITH ENCRYPTION
 
AS    
BEGIN 

  SELECT  A.ARTICLE_CODE, A.ARTICLE_NO, A.ARTICLE_NAME ,     
       B.SUB_SECTION_NAME,B.SUB_SECTION_CODE,C.SECTION_CODE, C.SECTION_NAME,A.DT_CREATED 
       ,A.CODING_SCHEME   ,A.PARA1_SET,A.PARA2_SET,A.ALIAS AS ARTICLE_ALIAS    ,AREA_WISE_RATE_APPLICABLE,
	  ISNULL( A.SEASON_SPECIFIC_ARTICLE,0) AS SEASON_SPECIFIC_ARTICLE , ISNULL(A.SEASON_ID,'') AS SEASON_ID
  FROM ARTICLE A (NOLOCK)   
  JOIN SECTIOND B (NOLOCK) ON A.SUB_SECTION_CODE = B.SUB_SECTION_CODE      
  JOIN SECTIONM C (NOLOCK)  ON B.SECTION_CODE = C.SECTION_CODE  
  WHERE A.ARTICLE_TYPE =1 AND ARTICLE_PRD_MODE <> 3  AND A.INACTIVE =0 
  AND ISNULL(A.ARTICLE_NO,'')<>''   AND ISNULL(C.ITEM_TYPE,1)=@NNAVMODE
  UNION ALL
  SELECT  A.ARTICLE_CODE, A.ALIAS AS [ARTICLE_NO], A.ARTICLE_NAME ,     
       B.SUB_SECTION_NAME,B.SUB_SECTION_CODE,C.SECTION_CODE, C.SECTION_NAME,A.DT_CREATED 
       ,A.CODING_SCHEME   ,A.PARA1_SET,A.PARA2_SET,A.ALIAS AS ARTICLE_ALIAS    ,AREA_WISE_RATE_APPLICABLE,
	   ISNULL( A.SEASON_SPECIFIC_ARTICLE,0) AS SEASON_SPECIFIC_ARTICLE , ISNULL(A.SEASON_ID,'') AS SEASON_ID
  FROM ARTICLE A (NOLOCK)   
  JOIN SECTIOND B (NOLOCK) ON A.SUB_SECTION_CODE = B.SUB_SECTION_CODE      
  JOIN SECTIONM C (NOLOCK)  ON B.SECTION_CODE = C.SECTION_CODE  
  WHERE A.ARTICLE_TYPE =1 AND ARTICLE_PRD_MODE <> 3  AND A.INACTIVE =0 
  AND ISNULL(A.ARTICLE_NO,'')<>'' AND ISNULL(A.ALIAS,'')<>''   AND ISNULL(C.ITEM_TYPE,1)=@NNAVMODE 
  ORDER BY ARTICLE_NO  
END