CREATE PROCEDURE SP_SHRINKDATAFILE  
--WITH ENCRYPTION
AS  
BEGIN  
 DECLARE @CLOGFILENAME VARCHAR(100) ,@CCMD NVARCHAR(MAX)  
  
 SET @CLOGFILENAME =''  
 SELECT @CLOGFILENAME = NAME   
 FROM SYS.SYSFILES   
 WHERE FILEID=1  
  
 SET @CCMD=N'DBCC SHRINKFILE ('''+ @CLOGFILENAME +''',1)'  
 EXEC SP_EXECUTESQL @CCMD  
  
END
