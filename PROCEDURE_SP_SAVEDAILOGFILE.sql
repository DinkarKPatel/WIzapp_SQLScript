CREATE PROC SP_SAVEDAILOGFILE              
(            
  @ROWID   VARCHAR(40),              
  @MODULENAME  NVARCHAR(100),              
  @FILENAME   NVARCHAR(500),              
  @MEMONO   NVARCHAR(50),            
  @REMARKS   NVARCHAR(100),          
  @FILETYPE   NVARCHAR(20),    
  @NOTES   NVARCHAR(4000)              
)      
--WITH ENCRYPTION        
AS              
BEGIN              
DECLARE @ROWNO AS INT            
IF NOT EXISTS(SELECT FILENAME  FROM DAILOGFILE WHERE ROWID=@ROWID )              
BEGIN              
  INSERT INTO DAILOGFILE(MODULENAME,FILENAME,MEMONO,REMARKS,FILETYPE,NOTES,ROWID,LAST_UPDATE,UPLOADED)              
  VALUES(@MODULENAME,@FILENAME,@MEMONO,@REMARKS,@FILETYPE,@NOTES,@ROWID,GETDATE(),0)              
END              
ELSE              
BEGIN     
  UPDATE DAILOGFILE SET UPLOADED=0,MODULENAME=@MODULENAME, FILENAME=@FILENAME, MEMONO=@MEMONO,   REMARKS=@REMARKS,          
  FILETYPE=@FILETYPE ,NOTES=@NOTES,LAST_UPDATE= GETDATE() WHERE ROWID=@ROWID       
END              
END
